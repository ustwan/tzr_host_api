<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WG_HUB ‚Äî –ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–æ–≤</title>
  <link rel="stylesheet" href="/assets/css/common.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <style>
    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      background: var(--bg-primary);
    }

    .header {
      background: rgba(28, 28, 30, 0.8);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      padding: 16px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: var(--shadow-md);
    }

    .header .container {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .header h1 {
      font-size: 1.5em;
      color: var(--text-primary);
      margin: 0;
      font-weight: 600;
      letter-spacing: -0.3px;
    }

    .btn-home {
      padding: 8px 16px;
      background: rgba(58, 58, 60, 0.4);
      backdrop-filter: blur(10px);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-md);
      color: var(--text-primary);
      text-decoration: none;
      font-size: 13px;
      transition: var(--transition-fast);
    }

    .btn-home:hover {
      background: rgba(58, 58, 60, 0.6);
      border-color: var(--border-light);
      transform: scale(1.02);
    }

    main {
      flex: 1;
      padding: 32px 0;
    }

    .search-section {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 24px;
      margin-bottom: 32px;
      box-shadow: var(--shadow-md);
    }

    .search-box {
      display: flex;
      gap: 12px;
      max-width: 600px;
    }

    .search-box input {
      flex: 1;
      padding: 12px 16px;
      font-size: 16px;
    }

    #player-results {
      margin-top: 24px;
    }

    .player-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 24px;
      box-shadow: var(--shadow-md);
    }

    .player-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--border);
      margin-bottom: 24px;
    }

    .player-info h2 {
      font-size: 2em;
      margin: 0 0 8px 0;
    }

    .player-id {
      color: var(--text-muted);
      font-size: 14px;
    }

    .tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 24px;
      border-bottom: 2px solid var(--border);
    }

    .tab {
      padding: 12px 24px;
      background: transparent;
      border: none;
      border-bottom: 2px solid transparent;
      color: var(--text-secondary);
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      margin-bottom: -2px;
    }

    .tab.active {
      color: var(--accent-blue);
      border-bottom-color: var(--accent-blue);
    }

    .tab:hover {
      color: var(--text-primary);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 16px;
      margin-bottom: 32px;
    }

    .stat-card {
      background: var(--bg-hover);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 20px;
    }

    .stat-label {
      font-size: 12px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
    }

    .stat-value {
      font-size: 32px;
      font-weight: 700;
      color: var(--text-primary);
      line-height: 1;
    }

    .stat-unit {
      font-size: 16px;
      color: var(--text-muted);
      margin-left: 4px;
    }

    .chart-container {
      position: relative;
      height: 300px;
      margin-bottom: 32px;
      background: var(--bg-hover);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 16px;
    }

    .antibot-section {
      background: var(--bg-hover);
      border: 1px solid var(--border);
      border-left: 4px solid var(--warning);
      border-radius: var(--radius-md);
      padding: 20px;
      margin-bottom: 24px;
    }

    .antibot-section.safe {
      border-left-color: var(--success);
    }

    .antibot-section.danger {
      border-left-color: var(--danger);
    }

    .antibot-title {
      font-size: 1.25em;
      font-weight: 700;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .antibot-flags {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .antibot-flag {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 8px 12px;
      background: var(--bg-secondary);
      border-radius: var(--radius-sm);
    }

    .flag-icon {
      font-size: 18px;
    }

    .cluster-card {
      background: linear-gradient(135deg, rgba(96, 165, 250, 0.1), rgba(167, 139, 250, 0.1));
      border: 1px solid var(--accent-blue);
      border-radius: var(--radius-md);
      padding: 20px;
    }

    .cluster-title {
      font-size: 1.125em;
      font-weight: 700;
      margin-bottom: 12px;
    }

    .cluster-desc {
      color: var(--text-secondary);
      line-height: 1.6;
    }

    .tanks-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 12px;
    }

    .tank-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px;
      background: var(--bg-hover);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
    }

    .tank-name {
      font-weight: 500;
    }

    .tank-battles {
      color: var(--text-muted);
      font-size: 12px;
    }

    .empty-state {
      text-align: center;
      padding: 48px 24px;
      color: var(--text-muted);
    }

    .empty-state-icon {
      font-size: 64px;
      margin-bottom: 16px;
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="container">
      <h1>üë§ –ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–æ–≤</h1>
      <a href="/" class="btn-home">‚Üê –ì–ª–∞–≤–Ω–∞—è</a>
    </div>
  </div>

  <main>
    <div class="container">
      <div class="search-section">
        <h3>–ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–∞</h3>
        <div class="search-box">
          <input 
            type="search" 
            id="search-input" 
            placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–æ—á–Ω—ã–π –Ω–∏–∫–Ω–µ–π–º –∏–≥—Ä–æ–∫–∞ (login)..."
            autocomplete="off"
          >
          <button class="btn btn-primary" id="search-btn">üîç –ù–∞–π—Ç–∏</button>
        </div>
        <div style="margin-top: 12px; display: grid; gap: 8px;">
          <select id="top-metric" style="padding: 8px; border-radius: var(--radius-md); background: var(--bg-input); border: 1px solid var(--border); color: var(--text-primary);">
            <option value="battles">–ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –±–æ—ë–≤</option>
            <option value="wins">–ü–æ –ø–æ–±–µ–¥–∞–º</option>
            <option value="kills_monsters">–ü–æ —É–±–∏–π—Å—Ç–≤–∞–º –º–æ–Ω—Å—Ç—Ä–æ–≤</option>
            <option value="kills_players">–ü–æ —É–±–∏–π—Å—Ç–≤–∞–º –∏–≥—Ä–æ–∫–æ–≤</option>
            <option value="pve_points">–ü–æ PvE –æ—á–∫–∞–º</option>
          </select>
          <button class="btn" id="btn-show-top">üìä –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ø –∏–≥—Ä–æ–∫–æ–≤</button>
        </div>
        
        <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border);">
          <h4 style="margin-bottom: 12px;">–ò–≥—Ä–æ–∫–∏ –ø–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º</h4>
          <div style="display: grid; gap: 8px;">
            <select id="profession-select" style="padding: 8px; border-radius: var(--radius-md); background: var(--bg-input); border: 1px solid var(--border); color: var(--text-primary);">
              <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏—é...</option>
              <option value="–±–µ–∑ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏">0: –±–µ–∑ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏</option>
              <option value="–∫–æ—Ä—Å–∞—Ä">1: –∫–æ—Ä—Å–∞—Ä</option>
              <option value="—Å—Ç–∞–ª–∫–µ—Ä">2: —Å—Ç–∞–ª–∫–µ—Ä</option>
              <option value="—Å—Ç–∞—Ä–∞—Ç–µ–ª—å">3: —Å—Ç–∞—Ä–∞—Ç–µ–ª—å</option>
              <option value="–∏–Ω–∂–µ–Ω–µ—Ä">4: –∏–Ω–∂–µ–Ω–µ—Ä</option>
              <option value="–Ω–∞–µ–º–Ω–∏–∫">5: –Ω–∞–µ–º–Ω–∏–∫</option>
              <option value="—Ç–æ—Ä–≥–æ–≤–µ—Ü">6: —Ç–æ—Ä–≥–æ–≤–µ—Ü</option>
              <option value="–ø–∞—Ç—Ä—É–ª—å–Ω—ã–π">7: –ø–∞—Ç—Ä—É–ª—å–Ω—ã–π</option>
              <option value="—à—Ç—É—Ä–º–æ–≤–∏–∫">8: —à—Ç—É—Ä–º–æ–≤–∏–∫</option>
              <option value="—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç">9: —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç</option>
              <option value="–∂—É—Ä–Ω–∞–ª–∏—Å—Ç">10: –∂—É—Ä–Ω–∞–ª–∏—Å—Ç</option>
              <option value="—á–∏–Ω–æ–≤–Ω–∏–∫">11: —á–∏–Ω–æ–≤–Ω–∏–∫</option>
              <option value="–ø—Å–∏–æ–Ω–∏–∫">12: –ø—Å–∏–æ–Ω–∏–∫</option>
              <option value="–∫–∞—Ç–æ—Ä–∂–Ω–∏–∫">13: –∫–∞—Ç–æ—Ä–∂–Ω–∏–∫</option>
              <option value="–ø—Å–∏-–∫–∏–Ω–µ—Ç–∏–∫">14: –ø—Å–∏-–∫–∏–Ω–µ—Ç–∏–∫</option>
              <option value="–ø—Å–∏-–º–µ–¥–∏–∫">15: –ø—Å–∏-–º–µ–¥–∏–∫</option>
              <option value="–ø—Å–∏-–ª–∏–¥–µ—Ä">16: –ø—Å–∏-–ª–∏–¥–µ—Ä</option>
              <option value="–ø–æ–ª–∏–º–æ—Ä—Ñ">17: –ø–æ–ª–∏–º–æ—Ä—Ñ</option>
            </select>
            <button class="btn" id="btn-show-profession">üë• –ü–æ–∫–∞–∑–∞—Ç—å –∏–≥—Ä–æ–∫–æ–≤</button>
          </div>
        </div>
      </div>

      <div id="player-results"></div>
    </div>
  </main>

  <div id="error-container"></div>
  <div id="loading-container" class="loading-container flex-center">
    <div class="loading-spinner"></div>
  </div>

  <script src="/assets/js/api-client.js"></script>
  <script>
    let currentPlayer = null;
    let charts = {};

    // –ü–æ–∏—Å–∫ –∏–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
    const urlParams = new URLSearchParams(window.location.search);
    const searchParam = urlParams.get('search');
    if (searchParam) {
      document.getElementById('search-input').value = searchParam;
      searchPlayer(searchParam);
    }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–∏—Å–∫–∞
    document.getElementById('search-btn').addEventListener('click', () => {
      const login = document.getElementById('search-input').value.trim();
      if (login) searchPlayer(login);
    });

    document.getElementById('search-input').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        const login = e.target.value.trim();
        if (login) searchPlayer(login);
      }
    });

    document.getElementById('btn-show-top').addEventListener('click', showTopPlayers);
    document.getElementById('btn-show-profession').addEventListener('click', showPlayersByProfession);

    // –ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–∞
    async function searchPlayer(login) {
      showLoading();
      const resultsEl = document.getElementById('player-results');
      resultsEl.innerHTML = '';

      try {
        // API4: /analytics/player/{login}
        const result = await api.client.get(`/analytics/player/${encodeURIComponent(login)}`);
        const data = result.success ? result.data : result;
        
        if (data.detail || !data.login) {
          throw new Error('–ò–≥—Ä–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω');
        }

        currentPlayer = {
          player_id: data.player_id,
          nickname: data.login,
          account_id: data.player_id
        };
        
        await loadPlayerData(data);
        
      } catch (error) {
        showError(error.message);
        resultsEl.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üòï</div>
            <h3>–ò–≥—Ä–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω</h3>
            <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ç–æ—á–Ω—ã–π –Ω–∏–∫–Ω–µ–π–º (login) –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "–ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ø –∏–≥—Ä–æ–∫–æ–≤"</p>
          </div>
        `;
      } finally {
        hideLoading();
      }
    }

    // –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ø –∏–≥—Ä–æ–∫–æ–≤
    async function showTopPlayers() {
      showLoading();
      const resultsEl = document.getElementById('player-results');
      const metric = document.getElementById('top-metric').value;
      console.log('üîç –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ø–∞ –∏–≥—Ä–æ–∫–æ–≤ —Å –º–µ—Ç—Ä–∏–∫–æ–π:', metric);

      try {
        const params = { 
          limit: 20,
          sort_by: metric
        };
        console.log('üì° API –∑–∞–ø—Ä–æ—Å:', '/analytics/players/top', params);
        const result = await api.client.get('/analytics/players/top', params);
        const data = result.success ? result.data : result;
        console.log('üìä –ü–æ–ª—É—á–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π:', data?.length, '–ü–µ—Ä–≤–∞—è –∑–∞–ø–∏—Å—å:', data?.[0]);
        
        if (!Array.isArray(data) || data.length === 0) {
          throw new Error('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö');
        }

        const metricNames = {
          'battles': '–±–æ—ë–≤',
          'wins': '–ø–æ–±–µ–¥',
          'kills_monsters': '—É–±–∏–π—Å—Ç–≤ –º–æ–Ω—Å—Ç—Ä–æ–≤',
          'kills_players': '—É–±–∏–π—Å—Ç–≤ –∏–≥—Ä–æ–∫–æ–≤',
          'pve_points': 'PvE –æ—á–∫–æ–≤'
        };

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ–π –∫–æ–ª–æ–Ω–∫–∏
        const highlightClass = (m) => metric === m ? 'style="background: var(--accent-primary); color: white;"' : '';

        resultsEl.innerHTML = `
          <div class="player-card">
            <h2>–¢–æ–ø-20 –∏–≥—Ä–æ–∫–æ–≤ –ø–æ ${metricNames[metric] || '–±–æ—ë–≤'}</h2>
            <p style="margin-top: 8px; color: var(--text-secondary); font-size: 14px;">
              üìä –í—Å–µ–≥–æ –¥–∞–Ω–Ω—ã–µ –∑–∞ –≤–µ—Å—å –¥–æ—Å—Ç—É–ø–Ω—ã–π –ø–µ—Ä–∏–æ–¥. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: <strong>${metricNames[metric]}</strong>
            </p>
            <table style="width: 100%; margin-top: 20px;">
              <thead>
                <tr>
                  <th>–ú–µ—Å—Ç–æ</th>
                  <th>–ò–≥—Ä–æ–∫</th>
                  <th ${highlightClass('battles')}>–ë–æ—ë–≤</th>
                  <th ${highlightClass('wins')}>–ü–æ–±–µ–¥</th>
                  <th ${highlightClass('kills_monsters')}>–ú–æ–Ω—Å—Ç—Ä–æ–≤</th>
                  <th ${highlightClass('kills_players')}>–ò–≥—Ä–æ–∫–æ–≤</th>
                  <th ${highlightClass('pve_points')}>PvE –æ—á–∫–∏</th>
                  <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
              </thead>
              <tbody>
                ${data.map((p, idx) => {
                  // –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–æ–ª–µ–π
                  const battles = p.battles_count || p.battles || p.total_battles || 0;
                  const wins = p.wins || p.win_count || 0;
                  const killsMonsters = p.kills_monsters || p.monster_kills || 0;
                  const killsPlayers = p.kills_players || p.player_kills || 0;
                  const pvePoints = p.pve_points || p.pve_score || 0;
                  
                  return `
                  <tr>
                    <td><strong>#${idx + 1}</strong></td>
                    <td><strong>${p.login}</strong></td>
                    <td ${highlightClass('battles')}>${battles}</td>
                    <td ${highlightClass('wins')}>${wins}</td>
                    <td ${highlightClass('kills_monsters')}>${killsMonsters}</td>
                    <td ${highlightClass('kills_players')}>${killsPlayers}</td>
                    <td ${highlightClass('pve_points')}>${pvePoints}</td>
                    <td><button class="btn btn-sm" onclick="searchPlayer('${p.login}')">–î–µ—Ç–∞–ª–∏</button></td>
                  </tr>
                  `;
                }).join('')}
              </tbody>
            </table>
          </div>
        `;
        
      } catch (error) {
        showError(error.message);
      } finally {
        hideLoading();
      }
    }

    // –ü–æ–∫–∞–∑–∞—Ç—å –∏–≥—Ä–æ–∫–æ–≤ –ø–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏
    async function showPlayersByProfession() {
      const profession = document.getElementById('profession-select').value;
      
      if (!profession) {
        alert('–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏—é');
        return;
      }
      
      showLoading();
      const resultsEl = document.getElementById('player-results');

      try {
        const result = await api.client.get('/players/by-profession', { 
          profession: profession,
          limit: 50,
          days: 365,
          min_battles: 1
        });
        const data = result.success ? result.data : result;
        
        if (data.detail || !Array.isArray(data) || data.length === 0) {
          throw new Error('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö');
        }

        resultsEl.innerHTML = `
          <div class="player-card">
            <h2>–ò–≥—Ä–æ–∫–∏: ${profession} (${data.length})</h2>
            <table style="width: 100%; margin-top: 20px;">
              <thead>
                <tr>
                  <th>‚Ññ</th>
                  <th>–ò–≥—Ä–æ–∫</th>
                  <th>–ë–æ—ë–≤</th>
                  <th>–í–∏–Ω—Ä–µ–π—Ç</th>
                  <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
              </thead>
              <tbody>
                ${data.map((p, idx) => `
                  <tr>
                    <td>${idx + 1}</td>
                    <td><strong style="cursor: pointer; color: var(--accent-blue);" onclick="searchPlayer('${p.login || p.nickname}')">${p.login || p.nickname}</strong></td>
                    <td>${p.battles || p.battles_count || 0}</td>
                    <td>${p.win_rate ? formatPercent(p.win_rate) : '‚Äî'}</td>
                    <td><button class="btn btn-sm" onclick="searchPlayer('${p.login || p.nickname}')">–î–µ—Ç–∞–ª–∏</button></td>
                  </tr>
                `).join('')}
              </tbody>
            </table>
          </div>
        `;
        
      } catch (err) {
        showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ' + err.message);
        resultsEl.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üöß</div>
            <h3>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h3>
            <p>${err.message}</p>
          </div>
        `;
      } finally {
        hideLoading();
      }
    }

    // –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–∞
    async function loadPlayerData(playerData) {
      showLoading();

      try {
        const login = playerData.login;
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
        const [antibotRes, playstyleRes, battlesRes, farmRes, rivalsRes, alliesRes] = await Promise.allSettled([
          api.client.get(`/analytics/antibot/player/${login}`),
          api.client.get(`/analytics/playstyle/${login}`),
          api.client.get(`/analytics/battles/player/${login}`, { limit: 100 }),
          api.client.get(`/analytics/economy/farm-efficiency/${login}`),
          api.client.get(`/analytics/social/rivals/${login}`),
          api.client.get(`/analytics/social/allies/${login}`)
        ]);

        const antibotData = antibotRes.status === 'fulfilled' ? (antibotRes.value.success ? antibotRes.value.data : antibotRes.value) : null;
        const playstyleData = playstyleRes.status === 'fulfilled' ? (playstyleRes.value.success ? playstyleRes.value.data : playstyleRes.value) : null;
        const battlesData = battlesRes.status === 'fulfilled' ? (battlesRes.value.success ? battlesRes.value.data : battlesRes.value) : null;
        const farmData = farmRes.status === 'fulfilled' ? (farmRes.value.success ? farmRes.value.data : farmRes.value) : null;
        const rivalsData = rivalsRes.status === 'fulfilled' ? (rivalsRes.value.success ? rivalsRes.value.data : rivalsRes.value) : null;
        const alliesData = alliesRes.status === 'fulfilled' ? (alliesRes.value.success ? alliesRes.value.data : alliesRes.value) : null;

        renderPlayerCard(playerData, antibotData, playstyleData, battlesData, farmData, rivalsData, alliesData);

      } catch (error) {
        showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö: ' + error.message);
      } finally {
        hideLoading();
      }
    }

    // –†–µ–Ω–¥–µ—Ä –∫–∞—Ä—Ç–æ—á–∫–∏ –∏–≥—Ä–æ–∫–∞
    function renderPlayerCard(playerData, antibot, playstyle, battles, farm, rivals, allies) {
      const resultsEl = document.getElementById('player-results');
      
      resultsEl.innerHTML = `
        <div class="player-card">
          <div class="player-header">
            <div class="player-info">
              <h2>${playerData.login || 'Unknown Player'}</h2>
              <div class="player-id">Player ID: ${playerData.player_id}</div>
            </div>
          </div>

          <div class="tabs">
            <button class="tab active" data-tab="overview">–û–±–∑–æ—Ä</button>
            <button class="tab" data-tab="battles">–ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 –±–æ—ë–≤</button>
            <button class="tab" data-tab="playstyle">–°—Ç–∏–ª—å –∏–≥—Ä—ã</button>
            <button class="tab" data-tab="economy">–≠–∫–æ–Ω–æ–º–∏–∫–∞</button>
            <button class="tab" data-tab="social">–°–æ—Ü–∏–∞–ª—å–Ω–æ–µ</button>
          </div>

          <div class="tab-content active" id="tab-overview">
            ${renderOverviewTab(playerData, antibot, playstyle, battles)}
          </div>
          
          <div class="tab-content" id="tab-battles">
            ${renderBattlesTab(battles)}
          </div>
          
          <div class="tab-content" id="tab-playstyle">
            ${renderPlaystyleTab(playstyle)}
          </div>
          
          <div class="tab-content" id="tab-economy">
            ${renderEconomyTab(farm)}
          </div>
          
          <div class="tab-content" id="tab-social">
            ${renderSocialTab(rivals, allies)}
          </div>
        </div>
      `;

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ç–∞–±–æ–≤
      document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', () => switchTab(tab.dataset.tab));
      });
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç—Ä–∏—Ü—ã —Ç–µ–ø–ª–æ–≤–æ–π –∫–∞—Ä—Ç—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
    function createActivityHeatmap(battles) {
      const matrix = Array(7).fill(0).map(() => Array(24).fill(0));
      
      if (!battles || !Array.isArray(battles)) {
        return matrix;
      }
      
      battles.forEach(battle => {
        const date = new Date(battle.ts || battle.start_ts || battle.timestamp);
        if (!isNaN(date.getTime())) {
          const dayOfWeek = (date.getDay() + 6) % 7; // 0 = –ü–Ω, 6 = –í—Å (–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –∏–∑ 0=–í—Å)
          const hour = date.getHours();
          matrix[dayOfWeek][hour]++;
        }
      });
      
      return matrix;
    }

    // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–µ–∫—Ü–∏–∏ —Ç–µ–ø–ª–æ–≤–æ–π –∫–∞—Ä—Ç—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
    function renderActivityHeatmapSection(matrix, battles) {
      if (!matrix || !battles || battles.length === 0) {
        return '';
      }

      const days = ['–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–í—Å'];
      const maxValue = Math.max(...matrix.flat(), 1);
      
      const getColor = (value) => {
        if (value === 0) return 'rgba(255, 255, 255, 0.03)';
        const intensity = Math.min(value / maxValue, 1);
        
        const baseColor = intensity < 0.3 ? 
          [94, 92, 230] : // —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π
          intensity < 0.6 ? 
          [10, 132, 255] : // —Å–∏–Ω–∏–π
          [48, 209, 88]; // –∑–µ–ª–µ–Ω—ã–π
        
        const alpha = 0.2 + (intensity * 0.6);
        return `rgba(${baseColor[0]}, ${baseColor[1]}, ${baseColor[2]}, ${alpha})`;
      };
      
      return `
        <div style="margin-top: 24px;">
          <h3 style="margin-bottom: 16px;">üìä –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ ${battles.length} –±–æ—ë–≤)</h3>
          
          <div style="
            background: linear-gradient(135deg, rgba(30, 30, 32, 0.95) 0%, rgba(28, 28, 30, 0.95) 100%);
            backdrop-filter: blur(30px) saturate(180%);
            -webkit-backdrop-filter: blur(30px) saturate(180%);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            padding: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.05);
          ">
            <div style="overflow-x: auto;">
              <table style="
                border-collapse: separate;
                border-spacing: 2px;
                margin: 0 auto;
                font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif;
              ">
                <thead>
                  <tr>
                    <th style="padding: 4px; text-align: center; font-weight: 500; color: rgba(255, 255, 255, 0.4); font-size: 8px;"></th>
                    ${Array(24).fill(0).map((_, h) => `
                      <th style="padding: 4px 3px; text-align: center; font-weight: 500; color: rgba(255, 255, 255, ${h % 6 === 0 ? '0.5' : '0.35'}); font-size: 8px;">${h}</th>
                    `).join('')}
                  </tr>
                </thead>
                <tbody>
                  ${matrix.map((dayData, dayIdx) => `
                    <tr>
                      <td style="padding: 4px 6px; text-align: right; font-weight: 600; color: rgba(255, 255, 255, 0.7); font-size: 9px;">${days[dayIdx]}</td>
                      ${dayData.map((value, hour) => `
                        <td style="padding: 0;">
                          <div 
                            style="
                              width: 16px;
                              height: 16px;
                              background: ${getColor(value)};
                              border-radius: 3px;
                              cursor: ${value > 0 ? 'pointer' : 'default'};
                              transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
                              border: 1px solid ${value > 0 ? 'rgba(255, 255, 255, 0.1)' : 'rgba(255, 255, 255, 0.03)'};
                              display: flex;
                              align-items: center;
                              justify-content: center;
                            "
                            title="${days[dayIdx]}, ${hour}:00 - ${value} –±–æ—ë–≤"
                            ${value > 0 ? `
                              onmouseover="this.style.transform='scale(1.15)'; this.style.borderColor='rgba(255, 255, 255, 0.3)'; this.style.boxShadow='0 2px 8px rgba(0, 0, 0, 0.3)';"
                              onmouseout="this.style.transform='scale(1)'; this.style.borderColor='rgba(255, 255, 255, 0.1)'; this.style.boxShadow='none';"
                            ` : ''}
                          >
                            ${value > 0 && value < 100 ? `<span style="font-size: 7px; font-weight: 700; color: rgba(255, 255, 255, 0.95);">${value}</span>` : ''}
                          </div>
                        </td>
                      `).join('')}
                    </tr>
                  `).join('')}
                </tbody>
              </table>
            </div>
            
            <div style="
              margin-top: 10px;
              padding-top: 10px;
              border-top: 1px solid rgba(255, 255, 255, 0.06);
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 10px;
              font-size: 8px;
              color: rgba(255, 255, 255, 0.5);
            ">
              <div style="display: flex; align-items: center; gap: 4px;">
                <div style="width: 10px; height: 10px; background: rgba(255, 255, 255, 0.03); border-radius: 2px;"></div>
                <span>–ù–µ—Ç</span>
              </div>
              <div style="display: flex; align-items: center; gap: 4px;">
                <div style="width: 10px; height: 10px; background: rgba(94, 92, 230, 0.4); border-radius: 2px;"></div>
                <span>–ú–∞–ª–æ</span>
              </div>
              <div style="display: flex; align-items: center; gap: 4px;">
                <div style="width: 10px; height: 10px; background: rgba(10, 132, 255, 0.6); border-radius: 2px;"></div>
                <span>–°—Ä–µ–¥–Ω–µ</span>
              </div>
              <div style="display: flex; align-items: center; gap: 4px;">
                <div style="width: 10px; height: 10px; background: rgba(48, 209, 88, 0.7); border-radius: 2px;"></div>
                <span>–ú–Ω–æ–≥–æ (${maxValue})</span>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    // –¢–∞–±: –û–±–∑–æ—Ä
    function renderOverviewTab(playerData, antibot, playstyle, battles) {
      if (!playerData) {
        return '<div class="empty-state"><p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</p></div>';
      }

      const winRate = playerData.battles_count > 0 ? (playerData.wins / playerData.battles_count * 100) : 0;
      const kdRatio = playerData.losses > 0 ? (playerData.wins / playerData.losses) : playerData.wins;

      // –°–æ–∑–¥–∞–µ–º —Ç–µ–ø–ª–æ–≤—É—é –∫–∞—Ä—Ç—É –∏–∑ battles
      const heatmapMatrix = createActivityHeatmap(battles);

      return `
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">–ë–æ—ë–≤</div>
            <div class="stat-value">${formatNumber(playerData.battles_count || 0)}</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">–í–∏–Ω—Ä–µ–π—Ç</div>
            <div class="stat-value">${formatPercent(winRate)}</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">–ü–æ–±–µ–¥</div>
            <div class="stat-value">${formatNumber(playerData.wins || 0)}</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">–ü–æ—Ä–∞–∂–µ–Ω–∏–π</div>
            <div class="stat-value">${formatNumber(playerData.losses || 0)}</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">–£–±–∏—Ç–æ –º–æ–Ω—Å—Ç—Ä–æ–≤</div>
            <div class="stat-value">${formatNumber(playerData.kills_monsters || 0)}</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">–£–±–∏—Ç–æ –∏–≥—Ä–æ–∫–æ–≤</div>
            <div class="stat-value">${formatNumber(playerData.kills_players || 0)}</div>
          </div>
        </div>

        ${renderActivityHeatmapSection(heatmapMatrix, battles)}
        ${renderAntibotSection(antibot)}
        ${renderPlaystyleSection(playstyle)}
      `;
    }

    // –ê–Ω—Ç–∏–±–æ—Ç —Å–µ–∫—Ü–∏—è
    function renderAntibotSection(antibot) {
      if (!antibot) {
        return '<div class="antibot-section"><p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∞–Ω—Ç–∏–±–æ—Ç–∞</p></div>';
      }

      const confidence = antibot.confidence || 0;
      const isSafe = confidence < 50;
      const isSuspicious = confidence >= 50 && confidence < 80;
      const isDanger = confidence >= 80;

      const sectionClass = isSafe ? 'safe' : (isDanger ? 'danger' : '');
      const statusIcon = isSafe ? 'üü¢' : (isDanger ? 'üî¥' : 'üü°');
      const statusText = isSafe ? '–ù–æ—Ä–º–∞–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å' : (isDanger ? '–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –±–æ—Ç–∞' : '–ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω');

      return `
        <div class="antibot-section ${sectionClass}">
          <div class="antibot-title">
            <span>ü§ñ –ê–Ω—Ç–∏–±–æ—Ç –∞–Ω–∞–ª–∏–∑</span>
            <span class="badge ${isSafe ? 'badge-success' : (isDanger ? 'badge-danger' : 'badge-warning')}">
              Confidence: ${confidence.toFixed(1)}%
            </span>
          </div>
          <div class="antibot-flags">
            <div class="antibot-flag">
              <span class="flag-icon">${statusIcon}</span>
              <span>${statusText}</span>
            </div>
            ${antibot.flags && antibot.flags.length > 0 ? antibot.flags.map(flag => `
              <div class="antibot-flag">
                <span class="flag-icon">‚ö†Ô∏è</span>
                <span>${flag}</span>
              </div>
            `).join('') : ''}
          </div>
        </div>
      `;
    }

    // –°—Ç–∏–ª—å –∏–≥—Ä—ã —Å–µ–∫—Ü–∏—è (–≤ –æ–±–∑–æ—Ä–µ)
    function renderPlaystyleSection(playstyle) {
      if (!playstyle || playstyle.detail) {
        return `<div class="cluster-card">
          <p>–î–∞–Ω–Ω—ã–µ —Å—Ç–∏–ª—è –∏–≥—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã (–º–æ–¥–µ–ª—å –Ω–µ –æ–±—É—á–µ–Ω–∞)</p>
        </div>`;
      }

      return `
        <div class="cluster-card">
          <div class="cluster-title">üéØ –°—Ç–∏–ª—å –∏–≥—Ä—ã: ${playstyle.display_name || 'Unknown'}</div>
          <div class="cluster-desc">
            ${playstyle.description || '–û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç–∏–ª—è –∏–≥—Ä—ã'}<br>
            <span style="color: var(--text-muted); font-size: 12px;">
              –ö–ª–∞—Å—Ç–µ—Ä #${playstyle.cluster_id} ‚Ä¢ ${playstyle.cluster_size} –∏–≥—Ä–æ–∫–æ–≤
            </span>
          </div>
        </div>
      `;
    }
    
    // –¢–∞–±: –ü–æ—Å–ª–µ–¥–Ω–∏–µ –±–æ–∏
    function renderBattlesTab(battles) {
      if (!battles || !Array.isArray(battles) || battles.length === 0) {
        return '<div class="empty-state"><p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –±–æ—è—Ö</p></div>';
      }

      return `
        <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 –±–æ—ë–≤</h3>
        <table style="width: 100%; margin-top: 20px;">
          <thead>
            <tr>
              <th>Battle ID</th>
              <th>Service ID</th>
              <th>–î–∞—Ç–∞/–≤—Ä–µ–º—è</th>
            </tr>
          </thead>
          <tbody>
            ${battles.slice(0, 100).map(b => `
              <tr style="cursor: pointer;" onclick="window.open('/battle-details.html?battle_id=${b.battle_id}', '_blank')">
                <td><a href="/battle-details.html?battle_id=${b.battle_id}" target="_blank" style="color: var(--accent-blue);">${b.battle_id}</a></td>
                <td>${b.service_id || '‚Äî'}</td>
                <td>${b.ts ? new Date(b.ts).toLocaleString('ru-RU') : '‚Äî'}</td>
              </tr>
            `).join('')}
          </tbody>
        </table>
      `;
    }
    
    // –¢–∞–±: –°—Ç–∏–ª—å –∏–≥—Ä—ã
    function renderPlaystyleTab(playstyle) {
      if (!playstyle || playstyle.detail) {
        return '<div class="empty-state"><p>–ú–æ–¥–µ–ª—å –Ω–µ –æ–±—É—á–µ–Ω–∞</p></div>';
      }

      return `
        <div style="display: grid; gap: 20px;">
          <div class="stat-card" style="grid-column: 1/-1;">
            <h3>üéØ ${playstyle.display_name || 'Unknown'}</h3>
            <p>${playstyle.description || '–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è'}</p>
            <div style="margin-top: 12px; color: var(--text-muted); font-size: 14px;">
              –ö–ª–∞—Å—Ç–µ—Ä #${playstyle.cluster_id} ‚Ä¢ ${playstyle.cluster_size} –∏–≥—Ä–æ–∫–æ–≤ ‚Ä¢ Confidence: ${(playstyle.confidence * 100).toFixed(0)}%
            </div>
          </div>

          ${playstyle.similar_players && playstyle.similar_players.length > 0 ? `
            <div class="stat-card" style="grid-column: 1/-1;">
              <h3>üë• –ü–æ—Ö–æ–∂–∏–µ –∏–≥—Ä–æ–∫–∏</h3>
              <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-top: 12px;">
                ${playstyle.similar_players.map(p => `
                  <span class="badge" style="cursor: pointer;" onclick="searchPlayer('${p}')">${p}</span>
                `).join('')}
              </div>
            </div>
          ` : ''}

          ${playstyle.bot_detection ? `
            <div class="stat-card" style="grid-column: 1/-1; border-left: 4px solid ${playstyle.bot_detection.is_likely_bot ? 'var(--danger)' : 'var(--success)'};">
              <h3>ü§ñ –î–µ—Ç–µ–∫—Ü–∏—è –±–æ—Ç–æ–≤</h3>
              <div style="margin-top: 12px;">
                <strong>–°—Ç–∞—Ç—É—Å:</strong> ${playstyle.bot_detection.is_likely_bot ? 'üî¥ –í–µ—Ä–æ—è—Ç–Ω–æ –±–æ—Ç' : 'üü¢ –ù–µ –±–æ—Ç'}<br>
                <strong>–°–∫–æ—Ä:</strong> ${(playstyle.bot_detection.bot_score * 100).toFixed(0)}%<br>
                <strong>–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤:</strong> ${playstyle.bot_detection.indicators_count}<br>
                <div style="margin-top: 12px;">
                  ${playstyle.bot_detection.reasons.map(r => `<div class="reason-item" style="background: var(--bg-hover); padding: 8px; margin-bottom: 4px; border-radius: 4px;">${r}</div>`).join('')}
                </div>
              </div>
            </div>
          ` : ''}
        </div>
      `;
    }
    
    // –¢–∞–±: –≠–∫–æ–Ω–æ–º–∏–∫–∞
    function renderEconomyTab(farm) {
      if (!farm || farm.detail) {
        return '<div class="empty-state"><p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö —ç–∫–æ–Ω–æ–º–∏–∫–∏</p></div>';
      }

      return `
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">–í—Å–µ–≥–æ —Ä–µ—Å—É—Ä—Å–æ–≤</div>
            <div class="stat-value">${formatNumber(farm.total_resources || 0)}</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">–ß–∞—Å–æ–≤ —Å—ã–≥—Ä–∞–Ω–æ</div>
            <div class="stat-value">${(farm.hours_played || 0).toFixed(2)}—á</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">–†–µ—Å—É—Ä—Å–æ–≤/—á–∞—Å</div>
            <div class="stat-value">${formatNumber(Math.round(farm.resources_per_hour || 0))}</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">–ü–µ—Ä–∏–æ–¥</div>
            <div class="stat-value">${farm.period_days || 30} –¥–Ω–µ–π</div>
          </div>
        </div>
      `;
    }
    
    // –¢–∞–±: –°–æ—Ü–∏–∞–ª—å–Ω–æ–µ
    function renderSocialTab(rivals, allies) {
      const hasRivals = rivals && Array.isArray(rivals) && rivals.length > 0;
      const hasAllies = allies && Array.isArray(allies) && allies.length > 0;

      if (!hasRivals && !hasAllies) {
        return '<div class="empty-state"><p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ —Å–æ–ø–µ—Ä–Ω–∏–∫–∞—Ö –∏ —Å–æ—é–∑–Ω–∏–∫–∞—Ö</p></div>';
      }

      return `
        <div style="display: grid; gap: 20px;">
          ${hasRivals ? `
            <div class="stat-card">
              <h3>‚öîÔ∏è –°–æ–ø–µ—Ä–Ω–∏–∫–∏ (${rivals.length})</h3>
              <div style="margin-top: 12px;">
                ${rivals.map(r => {
                  // API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç: { rival: "login", battles_against: 35 }
                  const login = r.rival || r.rival_login || r.login || r.player_login || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π';
                  const encounters = r.battles_against || r.encounters || r.encounter_count || r.battles || 0;
                  return `
                  <div style="padding: 8px; background: var(--bg-hover); margin-bottom: 4px; border-radius: 4px; cursor: pointer;" onclick="searchPlayer('${login}')">
                    <strong>${login}</strong> ‚Äî ${encounters} –≤—Å—Ç—Ä–µ—á
                  </div>
                  `;
                }).join('')}
              </div>
            </div>
          ` : '<div class="empty-state"><p>–ù–µ—Ç —Å–æ–ø–µ—Ä–Ω–∏–∫–æ–≤</p></div>'}
          
          ${hasAllies ? `
            <div class="stat-card">
              <h3>ü§ù –°–æ—é–∑–Ω–∏–∫–∏ (${allies.length})</h3>
              <div style="margin-top: 12px;">
                ${allies.map(a => {
                  // API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç: { ally: "login", battles_together: 14, synergy_score: 0.65, ... }
                  const login = a.ally || a.ally_login || a.login || a.player_login || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π';
                  const encounters = a.battles_together || a.encounters || a.encounter_count || a.battles || 0;
                  const synergy = a.synergy_text || '';
                  const playstyle = a.ally_playstyle || '';
                  return `
                  <div style="padding: 8px; background: var(--bg-hover); margin-bottom: 4px; border-radius: 4px; cursor: pointer;" onclick="searchPlayer('${login}')">
                    <div><strong>${login}</strong> ‚Äî ${encounters} –≤—Å—Ç—Ä–µ—á</div>
                    ${playstyle ? `<div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">–°—Ç–∏–ª—å: ${playstyle}</div>` : ''}
                    ${synergy ? `<div style="font-size: 11px; margin-top: 2px;">${synergy}</div>` : ''}
                  </div>
                  `;
                }).join('')}
              </div>
            </div>
          ` : '<div class="empty-state"><p>–ù–µ—Ç —Å–æ—é–∑–Ω–∏–∫–æ–≤</p></div>'}
        </div>
      `;
    }
    
    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∞–±–æ–≤
    function switchTab(tabName) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
      
      document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
      document.getElementById(`tab-${tabName}`).classList.add('active');
    }

  </script>
</body>
</html>


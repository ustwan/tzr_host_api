# üìä WG_HUB Visualization ‚Äî –í—Å–µ –¥–∞—à–±–æ—Ä–¥—ã (–ø–æ–ª–Ω—ã–π –≥–∞–π–¥)

## üåê –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

**URL:** http://localhost:14488

–ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É –≤—Å–µ–º–∏ 10 –¥–∞—à–±–æ—Ä–¥–∞–º–∏. –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–∞ –ø–æ –Ω–∏–∫—É.

---

## 1. üó∫Ô∏è Heatmap (–†–µ–¥–∞–∫—Ç–æ—Ä –ª–æ–∫–∞—Ü–∏–π)

**URL:** http://localhost:14488/heatmap.html

### –§—É–Ω–∫—Ü–∏–∏
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ –º–∏—Ä–∞ (-180..180)
- –†–µ–¥–∞–∫—Ç–æ—Ä –ª–æ–∫–∞—Ü–∏–π (–∫—É–ø–æ–ª–∞, —à–∞—Ö—Ç—ã, —Ñ–∞—Ä–º-—Ç–æ—á–∫–∏)
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ —Ñ–∞–π–ª–∞ –∏–ª–∏ API
- Tooltip —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ª–æ–∫–∞—Ü–∏–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏

### –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏ (3 –∫—É–ø–æ–ª–∞)
- **Old Moscow:** (0,-1), (0,0), (1,-1), (1,0), (2,-1), (2,0)
- **Neva City:** (-33,-56), (-33,-57), (-33,-55), (-34,-56), (-34,-57), (-34,-55)
- **Oasis:** (56,33), (56,34), (56,35), (55,33), (55,34), (55,35)

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –ö–æ–ª–µ—Å–æ –º—ã—à–∏ ‚Äî –∑—É–º
- –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ ‚Äî –ø–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úèÔ∏è **–†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–π
- –ö–ª–∏–∫ –Ω–∞ –∫–∞—Ä—Ç–µ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —è—á–µ–π–∫—É

---

## 2. üë§ Players (–ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–æ–≤)

**URL:** http://localhost:14488/players.html

### –§—É–Ω–∫—Ü–∏–∏
- –ü–æ–∏—Å–∫ –ø–æ –Ω–∏–∫–Ω–µ–π–º—É
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –ì—Ä–∞—Ñ–∏–∫–∏ (Chart.js)
- –ê–Ω—Ç–∏–±–æ—Ç —Ñ–ª–∞–≥–∏
- ML –∫–ª–∞—Å—Ç–µ—Ä —Å—Ç–∏–ª—è –∏–≥—Ä—ã
- –¢–∞–±—ã: –û–±–∑–æ—Ä, –ì—Ä–∞—Ñ–∏–∫–∏, –¢–∞–Ω–∫–∏, –ò—Å—Ç–æ—Ä–∏—è

### API Endpoints
- `/player/search?nickname=...`
- `/player/{id}/stats`
- `/antibot/check?account_id=...`
- `/ml/cluster?account_id=...`

---

## 3. ü§ñ Antibot (–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)

**URL:** http://localhost:14488/antibot.html

### –§—É–Ω–∫—Ü–∏–∏
- Real-time –ø–æ—Ç–æ–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫ (SSE)
- –¢–∞–±–ª–∏—Ü–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ 24—á
- –¢–æ–ø –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
- –§–∏–ª—å—Ç—Ä –ø–æ —É—Ä–æ–≤–Ω—é —Ä–∏—Å–∫–∞

### API Endpoints
- `/antibot/stream` (SSE)
- `/antibot/recent?limit=100`
- `/antibot/suspicious?limit=10`
- `/antibot/stats/24h`

---

## 4. üéØ ML Clusters (–ö–ª–∞—Å—Ç–µ—Ä—ã)

**URL:** http://localhost:14488/ml-clusters.html

### –§—É–Ω–∫—Ü–∏–∏
- 3D scatter plot (Plotly.js)
- 7 –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ —Å—Ç–∏–ª–µ–π –∏–≥—Ä—ã
- –í—ã–±–æ—Ä –æ—Å–µ–π X/Y/Z
- –ö–∞—Ä—Ç–æ—á–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
- –ö–ª–∏–∫ –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä ‚Äî –¥–µ—Ç–∞–ª–∏

### API Endpoints
- `/ml/clusters/stats`
- `/ml/cluster/{id}/players`
- `/ml/clusters/centroids`

---

## 5. üî• Analytics Heatmap (–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç—ã)

**URL:** http://localhost:14488/analytics-heatmap.html

### –§—É–Ω–∫—Ü–∏–∏
**3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**
- üìä **Analytics Heatmap** ‚Äî –æ–±—â–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- üè∞ **PvE Top Locations** ‚Äî —Ç–æ–ø –ª–æ–∫–∞—Ü–∏–π –¥–ª—è PvE
- ‚öîÔ∏è **PvP Hotspots** ‚Äî –≥–æ—Ä—è—á–∏–µ —Ç–æ—á–∫–∏ PvP

### –§–∏–ª—å—Ç—Ä—ã
- –î–∞—Ç–∞ –æ—Ç/–¥–æ
- –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö (dropdown)
- –†–∞–¥–∏—É—Å —Ç–æ—á–µ–∫
- –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å

### API Endpoints
- `/analytics/map/heatmap?date_from=...&date_to=...`
- `/analytics/pve/top-locations?date_from=...&date_to=...&limit=100`
- `/analytics/map/pvp-hotspots?date_from=...&date_to=...`

---

## 6. üó∫Ô∏è Clan Control (–ö–æ–Ω—Ç—Ä–æ–ª—å –∫–ª–∞–Ω–æ–≤)

**URL:** http://localhost:14488/analytics-clan-control.html

### –§—É–Ω–∫—Ü–∏–∏
- –¢–æ–ø –∫–ª–∞–Ω–æ–≤ –ø–æ % –∫–æ–Ω—Ç—Ä–æ–ª—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–º—É –∫–ª–∞–Ω—É
- –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–µ –ª–æ–∫–∞—Ü–∏–∏
- –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV

### –§–∏–ª—å—Ç—Ä—ã
- –ü–µ—Ä–∏–æ–¥ (7, 14, 30, 60, 90 –¥–Ω–µ–π)
- –ú–∏–Ω–∏–º—É–º –±–æ—ë–≤

### API Endpoint
- `/analytics/map/clan-control?days=30`

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "clans": [
    {
      "clan_tag": "ELITE",
      "clan_name": "Elite Warriors",
      "control_percentage": 45.2,
      "total_battles": 1234,
      "wins": 856,
      "win_rate": 69.4,
      "controlled_locations": ["Old Moscow", "Neva City"],
      "members_count": 45
    }
  ]
}
```

---

## 7. ‚è∞ Peak Hours (–ü–∏–∫–æ–≤—ã–µ —á–∞—Å—ã)

**URL:** http://localhost:14488/analytics-peak-hours.html

### –§—É–Ω–∫—Ü–∏–∏
- –ì—Ä–∞—Ñ–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ 24 —á–∞—Å–∞–º (—Å—Ç–æ–ª–±—Ü—ã/–ª–∏–Ω–∏—è)
- –¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞: –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ √ó –ß–∞—Å
- üÜï **Activity Heatmap:** –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –¥–Ω—è–º (30 –¥–Ω–µ–π √ó 24 —á–∞—Å–∞)
- –ò–Ω—Å–∞–π—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –ø–∏–∫–æ–≤—ã–π —á–∞—Å, —Å—Ä–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

### –§–∏–ª—å—Ç—Ä—ã
- –î–∞—Ç–∞ –æ—Ç/–¥–æ
- –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å (UTC, –ú–°–ö, –õ–æ–Ω–¥–æ–Ω, –ù—å—é-–ô–æ—Ä–∫)
- –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ (–≤—Å–µ/–±—É–¥–Ω–∏/–≤—ã—Ö–æ–¥–Ω—ã–µ)

### API Endpoints
- `/analytics/time/peak-hours?date_from=...&date_to=...&timezone=...`
- `/analytics/time/activity-heatmap?date_from=...&date_to=...`

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ (peak-hours):**
```json
{
  "hourly_stats": [{"hour": 0, "battles": 234, "avg_players": 48}],
  "peak_hour": {"hour": 20, "battles": 842},
  "min_hour": {"hour": 4, "battles": 45},
  "total_battles": 12345,
  "avg_battles_per_hour": 514,
  "day_of_week_stats": [{"day": "–ü–Ω", "hourly": [100, 120, ...]}]
}
```

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ (activity-heatmap):**
```json
{
  "activity": [
    {
      "date": "2025-10-01",
      "hourly": [50, 60, 45, ..., 200]
    }
  ]
}
```

---

## 8. ‚öîÔ∏è PvP ELO & Professions (PvP —Ä–µ–π—Ç–∏–Ω–≥)

**URL:** http://localhost:14488/analytics-pvp-elo.html

### –î–≤–µ –≤–∫–ª–∞–¥–∫–∏

#### –í–∫–ª–∞–¥–∫–∞ 1: ELO –†–µ–π—Ç–∏–Ω–≥
- –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤
- –†–∞–Ω–≥–∏: ü•áü•àü•â
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: —Ç–æ–ø ELO, —Å—Ä–µ–¥–Ω–∏–π ELO
- –§–∏–ª—å—Ç—Ä—ã: –¥–∞—Ç–∞ –æ—Ç/–¥–æ, –ª–∏–º–∏—Ç

#### –í–∫–ª–∞–¥–∫–∞ 2: –ü–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º
- –¢–∞–±–ª–∏—Ü–∞ –∏–≥—Ä–æ–∫–æ–≤
- –ü—Ä–æ—Ñ–µ—Å—Å–∏–∏:
  - üõ°Ô∏è –¢–∞–Ω–∫
  - ‚öîÔ∏è –î–∞–º–∞–≥–µ—Ä
  - üíö –•–∏–ª–µ—Ä
  - üîß –ü–æ–¥–¥–µ—Ä–∂–∫–∞
- –ì—Ä–∞—Ñ–∏–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (donut chart)
- –§–∏–ª—å—Ç—Ä –ø–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏

### API Endpoints
- `/analytics/pvp/elo?date_from=...&date_to=...&limit=50`
- `/players/by-profession?date_from=...&date_to=...&profession=...`

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ (ELO):**
```json
[
  {
    "rank": 1,
    "account_id": 1000001,
    "nickname": "Player_1",
    "elo": 2850,
    "battles": 456,
    "win_rate": 68.5,
    "kd_ratio": 2.3
  }
]
```

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ (–ü—Ä–æ—Ñ–µ—Å—Å–∏–∏):**
```json
[
  {
    "account_id": 2000001,
    "nickname": "Player_1",
    "profession": "tank",
    "battles": 234,
    "win_rate": 55.2,
    "avg_damage": 1850
  }
]
```

---

## 9. ‚ö†Ô∏è Churn Prediction (–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –æ—Ç—Ç–æ–∫–∞)

**URL:** http://localhost:14488/analytics-churn.html

### –§—É–Ω–∫—Ü–∏–∏
- –¢–∞–±–ª–∏—Ü–∞ –∏–≥—Ä–æ–∫–æ–≤ –≤ –≥—Ä—É–ø–ø–µ —Ä–∏—Å–∫–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –≤—ã—Å–æ–∫–∏–π/—Å—Ä–µ–¥–Ω–∏–π/–Ω–∏–∑–∫–∏–π —Ä–∏—Å–∫
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –æ—Ç—Ç–æ–∫–∞
- –ì—Ä–∞—Ñ–∏–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (donut)
- –§–∞–∫—Ç–æ—Ä—ã —Ä–∏—Å–∫–∞ (4 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
- –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV

### –§–∏–ª—å—Ç—Ä—ã
- –î–∞—Ç–∞ –æ—Ç/–¥–æ
- –£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞ (–≤—Å–µ/–≤—ã—Å–æ–∫–∏–π/—Å—Ä–µ–¥–Ω–∏–π/–Ω–∏–∑–∫–∏–π)
- –õ–∏–º–∏—Ç –∏–≥—Ä–æ–∫–æ–≤

### –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- –ü–æ —Ä–∏—Å–∫—É (–ø–æ —É–±—ã–≤–∞–Ω–∏—é)
- –ü–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–ø–æ—Å–ª–µ–¥–Ω–∏–π –±–æ–π)

### API Endpoint
- `/analytics/predictions/churn?date_from=...&date_to=...&risk_threshold=70&limit=50`

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "players": [
    {
      "account_id": 1000001,
      "nickname": "Player_1",
      "churn_probability": 85.3,
      "last_battle_days_ago": 15,
      "battles_last_30d": 12,
      "win_rate": 45.2,
      "avg_damage": 1234,
      "factors": {
        "inactivity": 0.85,
        "declining_performance": 0.45,
        "low_engagement": 0.72
      }
    }
  ]
}
```

---

## üìä –°–≤–æ–¥–∫–∞ –ø–æ –¥–∞—à–±–æ—Ä–¥–∞–º

| –î–∞—à–±–æ—Ä–¥ | Endpoints | –§–∏–ª—å—Ç—Ä—ã | –ì—Ä–∞—Ñ–∏–∫–∏ | –î–µ–º–æ |
|---------|-----------|---------|---------|------|
| Heatmap | 3 | –î–∞—Ç—ã, –∏—Å—Ç–æ—á–Ω–∏–∫ | Canvas | ‚úÖ |
| Players | 4 | –ü–æ–∏—Å–∫ | Chart.js | ‚úÖ |
| Antibot | 4 | –†–∏—Å–∫ | ‚Äî | ‚úÖ |
| ML Clusters | 3 | –û—Å–∏ | Plotly.js | ‚úÖ |
| Analytics Heatmap | 3 | –î–∞—Ç—ã, –∏—Å—Ç–æ—á–Ω–∏–∫ | Canvas | ‚úÖ |
| Clan Control | 1 | –ü–µ—Ä–∏–æ–¥, –±–æ—ë–≤ | ‚Äî | ‚úÖ |
| Peak Hours | 2 | –î–∞—Ç—ã, TZ, –¥–µ–Ω—å | Chart.js | ‚úÖ |
| PvP ELO | 2 | –î–∞—Ç—ã, –ø—Ä–æ—Ñ–µ—Å—Å–∏—è | Chart.js | ‚úÖ |
| Churn Prediction | 1 | –î–∞—Ç—ã, —Ä–∏—Å–∫, –ª–∏–º–∏—Ç | Chart.js | ‚úÖ |

**–í—Å–µ–≥–æ:** 9 –¥–∞—à–±–æ—Ä–¥–æ–≤ + –≥–ª–∞–≤–Ω–∞—è = 10 —Å—Ç—Ä–∞–Ω–∏—Ü

---

## üîå –í—Å–µ API Endpoints (–∏—Ç–æ–≥–æ 23)

### Battles
1. `GET /battles/heatmap`
2. `GET /battles/{id}`

### Players
3. `GET /player/search`
4. `GET /player/{id}/stats`
5. `GET /player/{id}/battles`
6. `GET /player/{id}/heatmap`
7. `GET /player/{id}/tanks/top`
8. `GET /players/by-profession`

### Antibot
9. `GET /antibot/check`
10. `GET /antibot/recent`
11. `GET /antibot/suspicious`
12. `GET /antibot/stats/24h`
13. `GET /antibot/stream` (SSE)

### ML
14. `GET /ml/cluster`
15. `GET /ml/clusters/stats`
16. `GET /ml/cluster/{id}/players`
17. `GET /ml/clusters/centroids`

### Analytics
18. `GET /analytics/map/heatmap`
19. `GET /analytics/map/clan-control`
20. `GET /analytics/pve/top-locations`
21. `GET /analytics/map/pvp-hotspots`
22. `GET /analytics/pvp/elo`
23. `GET /analytics/time/peak-hours`
24. `GET /analytics/time/activity-heatmap`
25. `GET /analytics/predictions/churn`

### Locations
26. `GET /locations`
27. `POST /locations`
28. `POST /locations/{id}`
29. `POST /locations/{id}/delete`

### System
30. `GET /health`
31. `GET /stats`

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø

```bash
# –ì–ª–∞–≤–Ω–∞—è
http://localhost:14488

# –¢–µ–ø–ª–æ–≤—ã–µ –∫–∞—Ä—Ç—ã
http://localhost:14488/heatmap.html              # –†–µ–¥–∞–∫—Ç–æ—Ä –ª–æ–∫–∞—Ü–∏–π
http://localhost:14488/analytics-heatmap.html    # 3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö

# –ò–≥—Ä–æ–∫–∏
http://localhost:14488/players.html              # –ü–æ–∏—Å–∫ + —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
http://localhost:14488/analytics-pvp-elo.html    # PvP ELO + –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ ML
http://localhost:14488/antibot.html              # Real-time –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
http://localhost:14488/ml-clusters.html          # K-Means –∫–ª–∞—Å—Ç–µ—Ä—ã

# –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
http://localhost:14488/analytics-clan-control.html  # –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–ª–∞–Ω–æ–≤
http://localhost:14488/analytics-peak-hours.html    # –ü–∏–∫–æ–≤—ã–µ —á–∞—Å—ã + activity
http://localhost:14488/analytics-churn.html         # –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –æ—Ç—Ç–æ–∫–∞
```

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
1. **Antibot** ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å SSE –ø–æ—Ç–æ–∫
2. **Peak Hours** ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é –Ω–∞–≥—Ä—É–∑–∫—É

### –î–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö
1. **Analytics Heatmap** ‚Äî –≤—ã–±—Ä–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ (PvE/PvP/All)
2. **Clan Control** ‚Äî —Ç–æ–ø –∫–ª–∞–Ω–æ–≤ –∑–∞ –ø–µ—Ä–∏–æ–¥
3. **Churn Prediction** ‚Äî –∏–≥—Ä–æ–∫–∏ –≤ –≥—Ä—É–ø–ø–µ —Ä–∏—Å–∫–∞

### –î–ª—è –ø–æ–∏—Å–∫–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
1. **Players** ‚Äî –ø–æ–∏—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞
2. **PvP ELO** ‚Äî —Ä–µ–π—Ç–∏–Ω–≥ –ª—É—á—à–∏—Ö –∏–≥—Ä–æ–∫–æ–≤
3. **ML Clusters** ‚Äî –∞–Ω–∞–ª–∏–∑ —Å—Ç–∏–ª–µ–π –∏–≥—Ä—ã

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (localhost)

–ï—Å–ª–∏ API –∑–∞–ø—É—â–µ–Ω –Ω–∞ `localhost:8005`, –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞
curl http://localhost:8005/health
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Nginx –ø—Ä–æ–∫—Å–∏

–ï—Å–ª–∏ –Ω—É–∂–µ–Ω CORS –ø—Ä–æ–∫—Å–∏, —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤ `nginx.conf`:

```nginx
location /api/ {
    proxy_pass http://api_5:8005/;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
}
```

–ò –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ:

```bash
docker-compose -f docker-compose.viz.yml up -d --build
```

---

## üì• –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —ç–∫—Å–ø–æ—Ä—Ç –≤ CSV:**
- Clan Control
- Churn Prediction

**–§–æ—Ä–º–∞—Ç:** UTF-8, —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å ‚Äî –∑–∞–ø—è—Ç–∞—è

---

## üé® –î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞

### –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¶–≤–µ—Ç | Hex |
|-----------|------|-----|
| Background | –¢—ë–º–Ω–æ-—Å–µ—Ä—ã–π | #0b0f14 |
| Cards | –°–µ—Ä—ã–π | #111827 |
| Accent Blue | –ì–æ–ª—É–±–æ–π | #60a5fa |
| Accent Purple | –§–∏–æ–ª–µ—Ç–æ–≤—ã–π | #a78bfa |
| Success | –ó–µ–ª—ë–Ω—ã–π | #10b981 |
| Warning | –ñ—ë–ª—Ç—ã–π | #fbbf24 |
| Danger | –ö—Ä–∞—Å–Ω—ã–π | #ef4444 |

### –®—Ä–∏—Ñ—Ç—ã

- **–û—Å–Ω–æ–≤–Ω–æ–π:** System UI, -apple-system, Segoe UI, Roboto
- **–ú–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π:** SF Mono, Monaco, Consolas
- **–†–∞–∑–º–µ—Ä:** 14px (base)

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### "Failed to fetch"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ API –∑–∞–ø—É—â–µ–Ω: `curl http://localhost:8005/health`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `baseURL` –≤ `api-client.js`
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è UI

### –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤—Å–µ–≥–¥–∞

**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!** –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ API.

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker ps | grep wg_visualization

# –õ–æ–≥–∏
docker logs wg_visualization --tail 50

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker restart wg_visualization
```

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
visualization/
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.viz.yml
‚îú‚îÄ‚îÄ nginx.conf
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ QUICKSTART.md
‚îú‚îÄ‚îÄ ANALYTICS_DASHBOARDS.md
‚îú‚îÄ‚îÄ LOCATIONS_GUIDE.md
‚îú‚îÄ‚îÄ UPDATE_SUMMARY.md
‚îú‚îÄ‚îÄ ALL_DASHBOARDS.md          ‚Üê –í–´ –ó–î–ï–°–¨
‚îî‚îÄ‚îÄ public/
    ‚îú‚îÄ‚îÄ index.html              (–≥–ª–∞–≤–Ω–∞—è)
    ‚îú‚îÄ‚îÄ heatmap.html            (—Ä–µ–¥–∞–∫—Ç–æ—Ä –ª–æ–∫–∞—Ü–∏–π)
    ‚îú‚îÄ‚îÄ players.html            (–ø–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–æ–≤)
    ‚îú‚îÄ‚îÄ antibot.html            (–∞–Ω—Ç–∏–±–æ—Ç)
    ‚îú‚îÄ‚îÄ ml-clusters.html        (ML –∫–ª–∞—Å—Ç–µ—Ä—ã)
    ‚îú‚îÄ‚îÄ analytics-heatmap.html  (3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Ç–µ–ø–ª–æ–≤—ã—Ö –∫–∞—Ä—Ç)
    ‚îú‚îÄ‚îÄ analytics-clan-control.html
    ‚îú‚îÄ‚îÄ analytics-peak-hours.html
    ‚îú‚îÄ‚îÄ analytics-pvp-elo.html  (ELO + –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏)
    ‚îú‚îÄ‚îÄ analytics-churn.html    (–ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –æ—Ç—Ç–æ–∫–∞)
    ‚îú‚îÄ‚îÄ data/
    ‚îÇ   ‚îî‚îÄ‚îÄ locations.json      (3 –∫—É–ø–æ–ª–∞)
    ‚îî‚îÄ‚îÄ assets/
        ‚îú‚îÄ‚îÄ js/
        ‚îÇ   ‚îî‚îÄ‚îÄ api-client.js   (31 endpoint)
        ‚îî‚îÄ‚îÄ css/
            ‚îî‚îÄ‚îÄ common.css
```

---

## üéâ –ò—Ç–æ–≥–æ

**–°–æ–∑–¥–∞–Ω–æ:**
- ‚úÖ 10 HTML —Å—Ç—Ä–∞–Ω–∏—Ü (9 –¥–∞—à–±–æ—Ä–¥–æ–≤ + –≥–ª–∞–≤–Ω–∞—è)
- ‚úÖ 31 API endpoint
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API5
- ‚úÖ –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Å–µ—Ö –¥–∞—à–±–æ—Ä–¥–æ–≤
- ‚úÖ –§–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–∞–º/–≤—Ä–µ–º–µ–Ω–∏/–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV (2 –¥–∞—à–±–æ—Ä–¥–∞)
- ‚úÖ Real-time SSE (Antibot)
- ‚úÖ 3D –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (ML Clusters)
- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç—ã (Canvas)
- ‚úÖ –ì—Ä–∞—Ñ–∏–∫–∏ (Chart.js, Plotly.js)
- ‚úÖ –†–µ–¥–∞–∫—Ç–æ—Ä –ª–æ–∫–∞—Ü–∏–π

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- Frontend: Vanilla JS (0 –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∫—Ä–æ–º–µ –±–∏–±–ª–∏–æ—Ç–µ–∫ –≥—Ä–∞—Ñ–∏–∫–æ–≤)
- –ì—Ä–∞—Ñ–∏–∫–∏: Chart.js 4.4.0, Plotly.js 2.27.0
- HTTP: Fetch API —Å retry/timeout
- Real-time: Server-Sent Events (SSE)
- –°–µ—Ä–≤–µ—Ä: Nginx 1.25 Alpine

---

## üåê –í—Å–µ —Å—Å—ã–ª–∫–∏ (–¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞)

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
http://localhost:14488                              # –ì–ª–∞–≤–Ω–∞—è
http://localhost:14488/heatmap.html                 # –†–µ–¥–∞–∫—Ç–æ—Ä –ª–æ–∫–∞—Ü–∏–π
http://localhost:14488/players.html                 # –ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–æ–≤
http://localhost:14488/antibot.html                 # –ê–Ω—Ç–∏–±–æ—Ç
http://localhost:14488/ml-clusters.html             # ML –∫–ª–∞—Å—Ç–µ—Ä—ã
http://localhost:14488/analytics-heatmap.html       # –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç—ã (3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞)
http://localhost:14488/analytics-clan-control.html  # –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–ª–∞–Ω–æ–≤
http://localhost:14488/analytics-peak-hours.html    # –ü–∏–∫–æ–≤—ã–µ —á–∞—Å—ã + activity
http://localhost:14488/analytics-pvp-elo.html       # PvP ELO + –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏
http://localhost:14488/analytics-churn.html         # –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –æ—Ç—Ç–æ–∫–∞
```

---

**–í—Å—ë –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ










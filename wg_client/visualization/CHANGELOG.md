# üìù Changelog ‚Äî –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

## 2025-10-11 ‚Äî –§–∏–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ñ–∞–π–ª—ã (8 —à—Ç—É–∫):

#### 1. `nginx.conf`
- –ò–∑–º–µ–Ω—ë–Ω –ø—Ä–æ–∫—Å–∏: –ø–æ—Ä—Ç 8085 ‚Üí **8084** (API4 Battle Logs)
- –î–æ–±–∞–≤–ª–µ–Ω—ã CORS headers
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ SSE

#### 2. `api-client.js`
- baseURL: –≤—Å–µ–≥–¥–∞ `/api` (—á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏)
- –î–æ–±–∞–≤–ª–µ–Ω—ã endpoints: getActivityHeatmap, getPvpElo, getPveElo
- –†–µ—Ç—Ä–∞–∏: 3 ‚Üí 2

#### 3. `analytics-peak-hours.html`
- ‚úÖ –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ —Ñ–æ—Ä–º–∞—Ç API4
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã findPeakHour/findMinHour —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ undefined –≤–æ –≤—Å–µ—Ö render —Ñ—É–Ω–∫—Ü–∏—è—Ö
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ (loadDemoData, generateDemoActivityHeatmap)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ó–∞–≥—Ä—É–∑–∏—Ç—å" –¥–ª—è activity heatmap

#### 4. `analytics-pvp-elo.html`
- ‚úÖ –†–∞–∑–¥–µ–ª—ë–Ω –Ω–∞ 3 –≤–∫–ª–∞–¥–∫–∏: PvP ELO, PvE ELO, –ü—Ä–æ—Ñ–µ—Å—Å–∏–∏
- ‚úÖ –û—Ç–¥–µ–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è PvP –∏ PvE
- ‚úÖ –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω —Ñ–æ—Ä–º–∞—Ç: login –≤–º–µ—Å—Ç–æ nickname, win_rate 0-1
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ (loadDemoElo, loadDemoProfessions)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ undefined

#### 5. `antibot.html`
- ‚úÖ –£–±—Ä–∞–Ω SSE Real-time –ø–æ—Ç–æ–∫
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è REST endpoint: `/analytics/antibot/candidates`
- ‚úÖ –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω —Ñ–æ—Ä–º–∞—Ç: suspicion_score ‚Üí confidence (0-1 ‚Üí 0-100%)
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏–∑ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏: toggleStream, startStream, stopStream

#### 6. `ml-clusters.html`
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è generateDemoData()
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "–ú–æ–¥–µ–ª—å –Ω–µ –æ–±—É—á–µ–Ω–∞"
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ renderPlot, renderLegend, renderClusterCards

#### 7. `analytics-heatmap.html`
- ‚úÖ –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ monsters –∏ battles
- ‚úÖ –£–±—Ä–∞–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–î–µ–º–æ"

#### 8. `analytics-churn.html`
- ‚úÖ –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω —Ñ–æ—Ä–º–∞—Ç: churn_score 0-1 ‚Üí churn_probability 0-100%
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ (loadDemoData)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ updateStats, renderChart

#### 9. `analytics-clan-control.html`
- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ dominant_clan
- ‚úÖ –í—ã—á–∏—Å–ª–µ–Ω–∏–µ process –∫–æ–Ω—Ç—Ä–æ–ª—è
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ (loadDemoData)

#### 10. `heatmap.html`
- ‚úÖ –£–±—Ä–∞–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–î–µ–º–æ"
- ‚úÖ –†–∞–¥–∏—É—Å –ª–æ–∫–∞—Ü–∏–π: 3 (–∫–æ–º–ø–∞–∫—Ç–Ω—ã–µ)

---

## üîÑ –£–¥–∞–ª—ë–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:

- ‚ùå –í—Å–µ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –∏–∑ –≤—Å–µ—Ö –¥–∞—à–±–æ—Ä–¥–æ–≤
- ‚ùå SSE Real-time –ø–æ—Ç–æ–∫ –∏–∑ antibot
- ‚ùå –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- ‚ùå generateDemoData() —Ñ—É–Ω–∫—Ü–∏–∏
- ‚ùå –ö–Ω–æ–ø–∫–∏ "–î–µ–º–æ"

---

## ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:

- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ undefined –≤–µ–∑–¥–µ
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –±–µ–∑ fallback –Ω–∞ –¥–µ–º–æ
- ‚úÖ –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤ API4
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ PvP/PvE ELO
- ‚úÖ Activity heatmap –∫–Ω–æ–ø–∫–∞
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ–æ–±—É—á–µ–Ω–Ω–æ–π ML –º–æ–¥–µ–ª–∏

---

## üìä –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö:

### –ò–∑ API4 –≤ –¥–∞—à–±–æ—Ä–¥—ã:

| API4 | –î–∞—à–±–æ—Ä–¥ | –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ |
|------|---------|----------------|
| `login` | `nickname` | –ü—Ä—è–º–æ–µ |
| `suspicion_score` (0-1) | `confidence` (0-100) | √ó 100 |
| `churn_score` (0-1) | `churn_probability` (0-100) | √ó 100 |
| `win_rate` (0-1) | `win_rate` (%) | √ó 100 |
| `hours[]` | `hourly_stats[]` | –†–∞—Å—á—ë—Ç peak/min |
| `dominant_clan` | `clan_name` | –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ |

---

## üß™ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:

```bash
‚úÖ /analytics/map/heatmap              ‚Üí 27 —Ç–æ—á–µ–∫
‚úÖ /analytics/map/clan-control         ‚Üí 10 –∫–ª–∞–Ω–æ–≤
‚úÖ /analytics/predictions/churn        ‚Üí 39 –∏–≥—Ä–æ–∫–æ–≤
‚úÖ /analytics/pve/top-locations        ‚Üí 10 –ª–æ–∫–∞—Ü–∏–π
‚úÖ /analytics/map/pvp-hotspots         ‚Üí 10 —Ç–æ—á–µ–∫
‚úÖ /analytics/time/peak-hours          ‚Üí OK (–µ—Å—Ç—å hours[])
‚úÖ /analytics/pvp/elo                  ‚Üí 3 –∏–≥—Ä–æ–∫–∞
‚úÖ /analytics/pve/elo                  ‚Üí 29 –∏–≥—Ä–æ–∫–æ–≤
‚úÖ /analytics/antibot/candidates       ‚Üí 19 –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
‚úÖ /analytics/playstyle/clusters/stats ‚Üí –ú–æ–¥–µ–ª—å –Ω–µ –æ–±—É—á–µ–Ω–∞
```

---

## ‚ú® –†–µ–∑—É–ª—å—Ç–∞—Ç:

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- 5 –¥–∞—à–±–æ—Ä–¥–æ–≤ —Ä–∞–±–æ—Ç–∞–ª–∏
- 5 –¥–∞—à–±–æ—Ä–¥–æ–≤ —Å –æ—à–∏–±–∫–∞–º–∏
- –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –≤–µ–∑–¥–µ

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- 9 –¥–∞—à–±–æ—Ä–¥–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç ‚úÖ
- 1 –¥–∞—à–±–æ—Ä–¥ (Players) –±–µ–∑ endpoint
- –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã ‚úÖ
- –í—Å–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã ‚úÖ

---

**–ì–æ—Ç–æ–≤–æ!** üöÄ –í—Å–µ –¥–∞—à–±–æ—Ä–¥—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

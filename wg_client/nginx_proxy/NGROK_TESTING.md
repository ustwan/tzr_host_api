# ðŸŒ Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ API Ñ Ngrok

> ÐšÐ°Ðº Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ API Ñ ÑÐ°Ð¹Ñ‚Ð¾Ð¼ Ð½Ð° ngrok (Ð¸Ð»Ð¸ Ð´Ñ€ÑƒÐ³Ð¾Ð¼ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ð¾Ð¼ Ñ…Ð¾ÑÑ‚Ð¸Ð½Ð³Ðµ)

---

## ðŸŽ¯ ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°

Ð’Ð°Ñˆ ÑÐ°Ð¹Ñ‚ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑÑ Ð½Ð° **ngrok** (Ð¸Ð»Ð¸ Ð´Ñ€ÑƒÐ³Ð¾Ð¼ Ñ…Ð¾ÑÑ‚Ð¸Ð½Ð³Ðµ Ñ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¼ URL), Ð° API Ð½Ð° **localhost**. 

Ð‘Ñ€Ð°ÑƒÐ·ÐµÑ€ Ð±Ð»Ð¾ÐºÐ¸Ñ€ÑƒÐµÑ‚ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ð¸Ð·-Ð·Ð° CORS, Ð¿Ð¾Ñ‚Ð¾Ð¼Ñƒ Ñ‡Ñ‚Ð¾:
```
https://your-site.ngrok.io â†’ http://localhost:8090
         âŒ CORS ERROR
```

---

## âœ… Ð ÐµÑˆÐµÐ½Ð¸Ðµ: Ngrok Ñ‚ÑƒÐ½Ð½ÐµÐ»ÑŒ Ð´Ð»Ñ API

ÐÑƒÐ¶Ð½Ð¾ **Ñ‚Ð°ÐºÐ¶Ðµ** Ð²Ñ‹ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ API Ñ‡ÐµÑ€ÐµÐ· ngrok.

---

## ðŸ“‹ Ð¨Ð°Ð³ 1: Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ngrok Ð´Ð»Ñ API

### Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ A: ÐžÑ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð°Ð»

```bash
# Ð’ Ð½Ð¾Ð²Ð¾Ð¼ Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð°Ð»Ðµ
ngrok http 8090
```

### Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ B: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹Ð¹ ÑÐºÑ€Ð¸Ð¿Ñ‚

```bash
cd /Users/ii/Documents/code/WG_HUB/wg_client/nginx_proxy
./START_NGROK_API.sh
```

---

## ðŸ“ Ð¨Ð°Ð³ 2: Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ ngrok URL

ÐŸÐ¾ÑÐ»Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ° ngrok Ð²Ñ‹ ÑƒÐ²Ð¸Ð´Ð¸Ñ‚Ðµ:

```
ngrok                                                          

Session Status                online
Account                       your_account (Plan: Free)
Version                       3.x.x
Region                        United States (us)
Latency                       -
Web Interface                 http://127.0.0.1:4040
Forwarding                    https://abc123xyz.ngrok-free.app -> http://localhost:8090

Connections                   ttl     opn     rt1     rt5     p50     p90
                              0       0       0.00    0.00    0.00    0.00
```

**Ð’Ð°Ð¶Ð½Ð¾:** Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ `Forwarding` URL:
```
https://abc123xyz.ngrok-free.app
```

---

## ðŸ”§ Ð¨Ð°Ð³ 3: ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ ÑÐ°Ð¹Ñ‚Ð°

### Ð’ ÐºÐ¾Ð´Ðµ ÑÐ°Ð¹Ñ‚Ð° Ð·Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ:

**Ð‘Ð«Ð›Ðž:**
```javascript
const API_CONFIG = {
    baseUrl: 'http://localhost:8090',
    apiKey: 'dev_api_key_12345'
};
```

**Ð¡Ð¢ÐÐ›Ðž:**
```javascript
const API_CONFIG = {
    baseUrl: 'https://abc123xyz.ngrok-free.app',  // â† Ð’Ð°Ñˆ ngrok URL!
    apiKey: 'dev_api_key_12345'
};
```

---

## âœ… Ð¨Ð°Ð³ 4: Ð¢ÐµÑÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿Ñ€ÑÐ¼Ð¾ Ð¸Ð· Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ð°:

1. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð²Ð°Ñˆ ÑÐ°Ð¹Ñ‚ Ð½Ð° ngrok: `https://your-site.ngrok.io`

2. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ DevTools â†’ Console

3. Ð’Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ:

```javascript
// Ð¢ÐµÑÑ‚ ÑÑ‚Ð°Ñ‚ÑƒÑÐ° ÑÐµÑ€Ð²ÐµÑ€Ð°
fetch('https://abc123xyz.ngrok-free.app/api/server/status')
    .then(res => res.json())
    .then(data => console.log(data));

// Ð¢ÐµÑÑ‚ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸
fetch('https://abc123xyz.ngrok-free.app/api/register', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
        'X-API-Key': 'dev_api_key_12345'
    },
    body: JSON.stringify({
        login: 'TestUser',
        password: 'test123',
        gender: 1,
        telegram_id: 123456789
    })
})
.then(res => res.json())
.then(data => console.log(data));
```

---

## ðŸš¨ Ngrok Free Plan ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ

### Ngrok Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ñ‹Ð¹ Ð¿Ð»Ð°Ð½ Ð¸Ð¼ÐµÐµÑ‚:

- âœ… **1 Ñ‚ÑƒÐ½Ð½ÐµÐ»ÑŒ Ð¾Ð´Ð½Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾** (Ð½ÑƒÐ¶Ð½Ð¾ 2 Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ° ngrok)
- âš ï¸ **URL Ð¼ÐµÐ½ÑÐµÑ‚ÑÑ** Ð¿Ñ€Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐµ
- âš ï¸ **Warning ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ð°** Ð¿Ñ€Ð¸ Ð¿ÐµÑ€Ð²Ð¾Ð¼ Ð·Ð°Ñ…Ð¾Ð´Ðµ

### Ð ÐµÑˆÐµÐ½Ð¸Ñ:

#### 1. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ 2 ngrok Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ°

```bash
# Ð¢ÐµÑ€Ð¼Ð¸Ð½Ð°Ð» 1: ngrok Ð´Ð»Ñ ÑÐ°Ð¹Ñ‚Ð°
ngrok http 3000

# Ð¢ÐµÑ€Ð¼Ð¸Ð½Ð°Ð» 2: ngrok Ð´Ð»Ñ API
ngrok http 8090
```

#### 2. Ð˜Ð»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ngrok config Ñ authtoken

```bash
# ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ authtoken Ð½Ð° https://dashboard.ngrok.com/get-started/your-authtoken

# Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ
ngrok config add-authtoken YOUR_TOKEN

# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³
cat > ~/.ngrok2/ngrok.yml << 'EOF'
version: "2"
authtoken: YOUR_TOKEN
tunnels:
  site:
    proto: http
    addr: 3000
  api:
    proto: http
    addr: 8090
EOF

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð¾Ð±Ð° Ñ‚ÑƒÐ½Ð½ÐµÐ»Ñ
ngrok start --all
```

#### 3. Ð˜Ð»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ URL (Ngrok Paid)

ÐŸÐ»Ð°Ñ‚Ð½Ñ‹Ð¹ Ð¿Ð»Ð°Ð½ ngrok Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ URL:
```
https://your-api.ngrok.app
```

---

## ðŸ”„ ÐÐ»ÑŒÑ‚ÐµÑ€Ð½Ð°Ñ‚Ð¸Ð²Ð°: Localtunnel (Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ñ‹Ð¹)

Ð•ÑÐ»Ð¸ ngrok Ð½Ðµ Ð¿Ð¾Ð´Ñ…Ð¾Ð´Ð¸Ñ‚, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ **localtunnel**:

```bash
# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°
npm install -g localtunnel

# Ð”Ð»Ñ API
lt --port 8090 --subdomain my-api
# URL: https://my-api.loca.lt

# Ð”Ð»Ñ ÑÐ°Ð¹Ñ‚Ð°
lt --port 3000 --subdomain my-site
# URL: https://my-site.loca.lt
```

**ÐŸÐ»ÑŽÑÑ‹:**
- âœ… Ð‘ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾
- âœ… ÐœÐ¾Ð¶Ð½Ð¾ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ subdomain (ÐµÑÐ»Ð¸ ÑÐ²Ð¾Ð±Ð¾Ð´ÐµÐ½)
- âœ… ÐÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ‚ÑƒÐ½Ð½ÐµÐ»ÐµÐ¹ Ð¾Ð´Ð½Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾

**ÐœÐ¸Ð½ÑƒÑÑ‹:**
- âš ï¸ ÐœÐµÐ½ÐµÐµ ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ð¾ Ñ‡ÐµÐ¼ ngrok
- âš ï¸ Ð˜Ð½Ð¾Ð³Ð´Ð° Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ðµ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ

---

## ðŸ§ª ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° CORS

### Ð•ÑÐ»Ð¸ Ð²ÑÐµ Ñ€Ð°Ð²Ð½Ð¾ CORS Ð¾ÑˆÐ¸Ð±ÐºÐ°:

1. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ngrok URL Ð² Ð¾Ñ‚Ð²ÐµÑ‚Ðµ:**

```bash
# ÐÐ° ÐºÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€Ðµ
curl -I https://your-ngrok.ngrok-free.app/api/server/status
```

Ð”Ð¾Ð»Ð¶Ð½Ñ‹ Ð±Ñ‹Ñ‚ÑŒ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¸:
```
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, OPTIONS
Access-Control-Allow-Headers: Content-Type, X-Request-Id
```

2. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ‡Ñ‚Ð¾ nginx ÐºÐ¾Ð½Ñ„Ð¸Ð³ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½:**

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð°
docker logs nginx_api_proxy

# Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ:
# nginx: configuration file /etc/nginx/nginx.conf test is successful
```

3. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ preflight (OPTIONS):**

```bash
curl -X OPTIONS https://your-ngrok.ngrok-free.app/api/server/status \
  -H "Origin: https://your-site.ngrok.io" \
  -H "Access-Control-Request-Method: GET" \
  -v
```

Ð”Ð¾Ð»Ð¶ÐµÐ½ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ `HTTP/1.1 204 No Content`

---

## ðŸ“Š Ð˜Ñ‚Ð¾Ð³Ð¾Ð²Ð°Ñ ÑÑ…ÐµÐ¼Ð° Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ

### Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ð°Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° (Ð±ÐµÐ· ngrok):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ð¡Ð°Ð¹Ñ‚            â”‚
â”‚ localhost:3000  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nginx Proxy            â”‚
â”‚ localhost:8090         â”‚
â”‚ (demo_site.html)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Traefik â†’ API          â”‚
â”‚ localhost:1010         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ð¡ ngrok (Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¼ URL):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ð¡Ð°Ð¹Ñ‚ Ð½Ð° ngrok            â”‚
â”‚ https://site.ngrok.io    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ HTTPS
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API Ð½Ð° ngrok                     â”‚
â”‚ https://api.ngrok.io             â”‚
â”‚ â†“ Ñ‚ÑƒÐ½Ð½ÐµÐ»ÑŒ Ðº localhost:8090       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nginx Proxy                    â”‚
â”‚ localhost:8090                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Traefik â†’ API                  â”‚
â”‚ localhost:1010                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Production:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ð¡Ð°Ð¹Ñ‚ Ð½Ð° Ñ…Ð¾ÑÑ‚Ð¸Ð½Ð³Ðµ         â”‚
â”‚ https://yoursite.com     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ HTTPS + API Key
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HOST_SERVER                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Nginx (Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹) :443       â”‚ â”‚
â”‚ â”‚ SSL + Rate Limit + CORS      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚              â†“                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ WireGuard VPN                â”‚ â”‚
â”‚ â”‚ â””â”€ Traefik â†’ API             â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ›  Troubleshooting

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð° 1: "tunnel not found"

**ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°:** ngrok Ð¿Ñ€Ð¾Ñ†ÐµÑÑ Ð½Ðµ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ Ð¸Ð»Ð¸ ÑƒÐ¿Ð°Ð»

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÑ‹
ps aux | grep ngrok

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ
ngrok http 8090
```

---

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð° 2: "ERR_NGROK_3200"

**ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°:** Ð›Ð¸Ð¼Ð¸Ñ‚ Ñ‚ÑƒÐ½Ð½ÐµÐ»ÐµÐ¹ (Free plan = 1 Ñ‚ÑƒÐ½Ð½ÐµÐ»ÑŒ)

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
```bash
# Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 1: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ authtoken Ð¸ config (ÑÐ¼Ð¾Ñ‚Ñ€Ð¸Ñ‚Ðµ Ð²Ñ‹ÑˆÐµ)
# Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 2: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ localtunnel
# Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 3: ÐšÑƒÐ¿Ð¸Ñ‚Ðµ ngrok Pro ($8/Ð¼ÐµÑÑÑ†)
```

---

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð° 3: "This site is protected by ngrok"

**ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°:** Ngrok warning page Ð´Ð»Ñ Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾Ð³Ð¾ Ð¿Ð»Ð°Ð½Ð°

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
- ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ "Visit Site"
- Ð˜Ð»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ localtunnel
- Ð˜Ð»Ð¸ ÐºÑƒÐ¿Ð¸Ñ‚Ðµ ngrok Pro

---

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð° 4: CORS Ð²ÑÐµ Ñ€Ð°Ð²Ð½Ð¾ Ð±Ð»Ð¾ÐºÐ¸Ñ€ÑƒÐµÑ‚

**ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°:** Nginx ÐºÐ¾Ð½Ñ„Ð¸Ð³ Ð½Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÐ½Ð¸Ð»ÑÑ

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
```bash
# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€
cd /Users/ii/Documents/code/WG_HUB/wg_client/nginx_proxy
docker-compose restart

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ‡Ñ‚Ð¾ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½
docker ps | grep nginx_api_proxy

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸
docker logs nginx_api_proxy
```

---

## ðŸ“ž Quick Reference

### ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹:

```bash
# Ð—Ð°Ð¿ÑƒÑÐº ngrok Ð´Ð»Ñ API
ngrok http 8090

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ‚ÑƒÐ½Ð½ÐµÐ»ÐµÐ¹
curl http://127.0.0.1:4040/api/tunnels

# Ð¢ÐµÑÑ‚ API Ñ‡ÐµÑ€ÐµÐ· ngrok
curl https://YOUR-NGROK-URL.ngrok-free.app/api/server/status

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº Nginx proxy
docker-compose restart
```

### URLs:

| Ð¡ÐµÑ€Ð²Ð¸Ñ | Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾ | Ngrok |
|--------|----------|-------|
| **Ð¡Ð°Ð¹Ñ‚** | `http://localhost:3000` | `https://YOUR-SITE.ngrok.io` |
| **API** | `http://localhost:8090` | `https://YOUR-API.ngrok.io` |
| **Ngrok Dashboard** | `http://127.0.0.1:4040` | - |

### API Keys:

| Ð­Ð½Ð´Ð¿Ð¾Ð¸Ð½Ñ‚ | API Key Required? |
|----------|-------------------|
| `/api/server/status` | âŒ ÐÐµÑ‚ |
| `/api/register` | âœ… Ð”Ð°: `dev_api_key_12345` |

---

**ðŸ“š Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ:**
- [Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ð°Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°](QUICKSTART.md)
- [Production Setup](PRODUCTION_SETUP.md)
- [Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ ÑÐ°Ð¹Ñ‚Ð¾Ð¼](API_FOR_WEBSITE.md)




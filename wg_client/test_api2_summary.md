# üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API 2

## ‚úÖ –£—Å–ø–µ—à–Ω–æ (13/18 —Ç–µ—Å—Ç–æ–≤ - 72%)

### 1. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö ‚úÖ
- ‚úÖ –ö–æ—Ä–æ—Ç–∫–∏–π –ª–æ–≥–∏–Ω (< 3 —Å–∏–º–≤–æ–ª–æ–≤) - –æ—Ç–∫–ª–æ–Ω–µ–Ω
- ‚úÖ –î–ª–∏–Ω–Ω—ã–π –ª–æ–≥–∏–Ω (> 16 —Å–∏–º–≤–æ–ª–æ–≤) - –æ—Ç–∫–ª–æ–Ω–µ–Ω
- ‚úÖ –ö–æ—Ä–æ—Ç–∫–∏–π –ø–∞—Ä–æ–ª—å (< 6 —Å–∏–º–≤–æ–ª–æ–≤) - –æ—Ç–∫–ª–æ–Ω–µ–Ω
- ‚úÖ –î–ª–∏–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å (> 20 —Å–∏–º–≤–æ–ª–æ–≤) - –æ—Ç–∫–ª–æ–Ω–µ–Ω
- ‚úÖ –ù–µ–≤–µ—Ä–Ω—ã–π gender (–Ω–µ 0 –∏–ª–∏ 1) - –æ—Ç–∫–ª–æ–Ω–µ–Ω

### 2. –ë–∞–∑–æ–≤–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚úÖ
- ‚úÖ –ê–Ω–≥–ª–∏–π—Å–∫–∏–π –ª–æ–≥–∏–Ω - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –õ–æ–≥–∏–Ω —Å –ø—Ä–æ–±–µ–ª–æ–º - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥–∏–Ω–∞ - —Ä–∞–±–æ—Ç–∞–µ—Ç

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ ‚úÖ
- ‚úÖ –î—É–±–ª–∏–∫–∞—Ç –ª–æ–≥–∏–Ω–∞ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è - —Ä–∞–±–æ—Ç–∞–µ—Ç

### 4. –ó–∞–ø–∏—Å—å –≤ –ë–î ‚úÖ
- ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `tgplayers`
- ‚úÖ –ü–æ–ª—è `telegram_id`, `username`, `login` –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è

## ‚ùå –ü—Ä–æ–±–ª–µ–º—ã (5/18 —Ç–µ—Å—Ç–æ–≤)

### 1. Intermittent "game_server_unreachable" (4 —Ç–µ—Å—Ç–∞)
**–°–∏–º–ø—Ç–æ–º—ã:**
- –¢–µ—Å—Ç 1.1: –†—É—Å—Å–∫–∏–π –ª–æ–≥–∏–Ω "–ò–≥—Ä–æ–∫123" - fail
- –¢–µ—Å—Ç 1.4: –õ–æ–≥–∏–Ω "Player_Test-123" - fail
- –¢–µ—Å—Ç 2.4: "LimitPlayer4" - fail
- –¢–µ—Å—Ç 2.5: "LimitPlayer5" - fail
- –¢–µ—Å—Ç 4.6: "OnlyEnglish" - fail (–Ω–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è pass –∏–∑-–∑–∞ –ª–æ–≥–∏–∫–∏ —Ç–µ—Å—Ç–∞)

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. Race condition –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ Game Server
2. Timeout –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ª–æ–≥–∏–Ω–æ–≤
3. Game Server mock –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Å–∏–º–≤–æ–ª—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. –ü—Ä–æ–±–ª–µ–º—ã —Å ThreadPoolExecutor –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –£–≤–µ–ª–∏—á–∏—Ç—å timeout –¥–ª—è Game Server
- –î–æ–±–∞–≤–∏—Ç—å retry –º–µ—Ö–∞–Ω–∏–∑–º
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Game Server mock –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É –≤—Å–µ—Ö —Å–∏–º–≤–æ–ª–æ–≤

### 2. –õ–∏–º–∏—Ç 5 –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç ‚ùå
**–°–∏–º–ø—Ç–æ–º—ã:**
- –°–æ–∑–¥–∞–Ω–æ 4 –∞–∫–∫–∞—É–Ω—Ç–∞ –¥–ª—è `telegram_id=111222333`
- –¢–µ—Å—Ç 2.6 (—Å–æ–∑–¥–∞–Ω–∏–µ 6-–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞) –ø—Ä–æ—à–µ–ª —É—Å–ø–µ—à–Ω–æ (ok=true)
- –û–∂–∏–¥–∞–ª–æ—Å—å: limit_exceeded –ø–æ—Å–ª–µ 5-–≥–æ

**–§–∞–∫—Ç—ã:**
```sql
SELECT COUNT(*) FROM tgplayers WHERE telegram_id = 111222333;
-- –†–µ–∑—É–ª—å—Ç–∞—Ç: 4
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. –ò–∑-–∑–∞ intermittent –æ—à–∏–±–æ–∫ —Ç–µ—Å—Ç—ã 2.4 –∏ 2.5 –Ω–µ —Å–æ–∑–¥–∞–ª–∏ –∑–∞–ø–∏—Å–∏
2. –õ–∏–º–∏—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –Ω–µ –±—ã–ª –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –∏–∑-–∑–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –æ—à–∏–±–æ–∫

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç–µ—Å—Ç –ª–∏–º–∏—Ç–∞ –æ—Ç–¥–µ–ª—å–Ω–æ —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ 5 –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞—é—Ç—Å—è

### 3. –ö–æ–¥–∏—Ä–æ–≤–∫–∞ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã –≤ –ë–î ‚ö†Ô∏è
**–°–∏–º–ø—Ç–æ–º—ã:**
```sql
SELECT login FROM tgplayers WHERE telegram_id = 123456;
-- –†–µ–∑—É–ª—å—Ç–∞—Ç: ?????999 (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: –£—Å–ø–µ—Ö999)
```

**–°—Ç–∞—Ç—É—Å:** –í–∏–∑—É–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ MySQL CLI
- –î–∞–Ω–Ω—ã–µ –≤ –ë–î –º–æ–≥—É—Ç –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ (UTF-8)
- MySQL CLI –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–∏—Ä–∏–ª–ª–∏—Ü—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ —Ä–∞–Ω–µ–µ)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ API: GET /internal/constants (—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)
- –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

## üìà –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –°—Ç–∞—Ç—É—Å |
|-----------|--------|
| –í–∞–ª–∏–¥–∞—Ü–∏—è API 2 | ‚úÖ 100% |
| –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (–±–∞–∑–æ–≤–∞—è) | ‚ö†Ô∏è 67% (intermittent errors) |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ | ‚úÖ 100% |
| –õ–∏–º–∏—Ç –∞–∫–∫–∞—É–Ω—Ç–æ–≤ | ‚ö†Ô∏è –ù–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é |
| –ë–î –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| Game Server | ‚ö†Ô∏è Intermittent failures |

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å intermittent –æ—à–∏–±–∫–∏:**
   - –î–æ–±–∞–≤–∏—Ç—å retry –≤ `socket_game_server_client.py`
   - –£–≤–µ–ª–∏—á–∏—Ç—å timeout –¥–æ 10 —Å–µ–∫—É–Ω–¥
   - –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ Game Server

2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–∏–º–∏—Ç –æ—Ç–¥–µ–ª—å–Ω–æ:**
   - –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è `telegram_id=111222333`
   - –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞—Ç—å 5 –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 1 —Å–µ–∫
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ 6-–π –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è

3. **–î–æ–±–∞–≤–∏—Ç—å E2E —Ç–µ—Å—Ç—ã:**
   - –ü–æ–ª–Ω—ã–π flow: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ Game Server
   - –ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã (10+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π)

## ‚úÖ –í—ã–≤–æ–¥—ã

**–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç**, –Ω–æ –∏–º–µ–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ –∏–ª–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–∞—Ö –≤ –ª–æ–≥–∏–Ω–µ.

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** –°–†–ï–î–ù–Ø–Ø  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥—É:** 70% (–Ω—É–∂–Ω—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è intermittent errors)

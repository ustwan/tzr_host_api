# üìä –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ vs Mock –¥–∞–Ω–Ω—ã–µ

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ –º–æ–∫–∏!

---

## üé≠ –í –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ (MOCK)

### –ó–∞–ø–æ–ª–Ω–µ–Ω–æ —Ç–æ–ª—å–∫–æ 9 –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞:

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –¢–æ–≤–∞—Ä–æ–≤ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|-----------|---------|------------|
| k | 2 | Mock –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ |
| p | 1 + –≥—Ä—É–ø–ø–∞ | Mock –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ |
| v | 1 | Mock –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ |
| e | 1 | Mock –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ |
| a | 2 | Mock –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ |
| h | 2 | Mock –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ |
| c | 1 | Mock –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ |
| d | 2 | Mock –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ |
| q | 1 –≥—Ä—É–ø–ø–∞ | Mock –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ |
| **–û—Å—Ç–∞–ª—å–Ω—ã–µ 18** | **0** | **–ü—É—Å—Ç—ã–µ –º–æ–∫–∏!** |

**–ò—Ç–æ–≥–æ –≤ –¥–µ–º–æ: 12 —Ç–æ–≤–∞—Ä–æ–≤**

---

## ‚úÖ –í –†–ï–ê–õ–¨–ù–û–°–¢–ò (–∫–æ–≥–¥–∞ –ø–æ–¥–∫–ª—é—á–∏–º—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É)

### –í–°–ï 27 –∫–∞—Ç–µ–≥–æ—Ä–∏–π –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω—ã!

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–∂–∏–¥–∞–µ–º–æ–µ –∫–æ–ª-–≤–æ |
|-----------|----------|------------------|
| k | –•–æ–ª–æ–¥–Ω–æ–µ –æ—Ä—É–∂–∏–µ | ~50 |
| p | –ü–∏—Å—Ç–æ–ª–µ—Ç—ã | ~100 + –≥—Ä—É–ø–ø—ã |
| v | –í–∏–Ω—Ç–æ–≤–∫–∏ | ~80 |
| w | –¢—è–∂—ë–ª–æ–µ –æ—Ä—É–∂–∏–µ | ~40 |
| e | –≠–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–µ | ~60 |
| x | –ë–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ | ~30 |
| g | –ú–µ—Ç–∞—Ç–µ–ª—å–Ω–æ–µ | ~40 |
| m | –ë–æ–µ–≤—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ | ~50 |
| a | –ü–∞—Ç—Ä–æ–Ω—ã | ~30 |
| i | –≠–Ω–µ—Ä–≥–æ–º–æ–¥—É–ª–∏ | ~20 |
| **–ò–¢–û–ì–û –æ—Ä—É–∂–∏–µ** | | **~500** |
| | | |
| h | –ö–∞—Å–∫–∏/–±–µ—Ä–µ—Ç—ã | ~80 |
| c | –ö—É—Ä—Ç–∫–∏/–±—Ä–æ–Ω–µ–∂–∏–ª–µ—Ç—ã | ~100 |
| l | –ù–∞—Ä—É–∫–∞–≤–Ω–∏–∫–∏ | ~60 |
| t | –ë—Ä—é–∫–∏ | ~70 |
| b | –û–±—É–≤—å | ~50 |
| f | –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∞—è | ~40 |
| q | –ö–æ–º–ø–ª–µ–∫—Ç—ã | ~30 |
| **–ò–¢–û–ì–û –æ–¥–µ–∂–¥–∞** | | **~430** |
| | | |
| **u** | **–í—Å—Ç—Ä–æ–π–∫–∏** | **~80** ‚Üê –¢–£–¢ –ú–ù–û–ì–û! |
| **n** | **–£–ª—É—á—à–µ–Ω–∏–µ** | **~70** ‚Üê –¢–£–¢ –ú–ù–û–ì–û! |
| j | –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ | ~60 |
| d | –ú–µ–¥–∏—Ü–∏–Ω–∞ | ~50 |
| **s** | **–†–µ—Å—É—Ä—Å—ã** | **~200** ‚Üê –û–ß–ï–ù–¨ –ú–ù–û–ì–û! |
| **y** | **–ö—Ä–∞—Ñ—Ç-—Ä–µ–∞–≥–µ–Ω—Ç—ã** | **~150** ‚Üê –û–ß–ï–ù–¨ –ú–ù–û–ì–û! |
| r | –î–æ–∫—É–º–µ–Ω—Ç—ã | ~40 |
| z | –ü—Ä–æ—á–µ–µ | ~80 |
| 0 | –ò–º–ø–ª–∞–Ω—Ç—ã | ~30 |
| 1 | –ú–æ–∏ –≤–µ—â–∏ | ~20 (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –±–æ—Ç–∞) |
| **–ò–¢–û–ì–û –ø—Ä–æ—á–µ–µ** | | **~780** |
| | | |
| **–í–°–ï–ì–û –í –ú–ê–ì–ê–ó–ò–ù–ï** | | **~1700 —Ç–æ–≤–∞—Ä–æ–≤!** |

---

## üîç –ü–æ—á–µ–º—É –≤ –¥–µ–º–æ –ø–æ–∫–∞–∑–∞–ª 0?

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –±—ã–ª–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –õ–û–ì–ò–ö–ò:

1. ‚úÖ –ü–∞—Ä—Å–µ—Ä —É–º–µ–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å XML
2. ‚úÖ –ü–∞—Ä—Å–µ—Ä —É–º–µ–µ—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª—è
3. ‚úÖ –ü–∞—Ä—Å–µ—Ä —É–º–µ–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é
4. ‚úÖ –ü–∞—Ä—Å–µ—Ä —É–º–µ–µ—Ç —Ä–∞—Å–∫—Ä—ã–≤–∞—Ç—å –≥—Ä—É–ø–ø—ã
5. ‚úÖ –ü–∞—Ä—Å–µ—Ä —É–º–µ–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ –≤—Å–µ–º–∏ —Ç–∏–ø–∞–º–∏ —Ç–æ–≤–∞—Ä–æ–≤

**–Ø —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Å–æ–∑–¥–∞–ª –ú–û–ö–ò —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞.**

### –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –ø—É—Å—Ç–æ–π XML:

```python
# –ï—Å–ª–∏ –Ω–µ—Ç –º–æ–∫–∞ ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É—Å—Ç–æ–π XML
xml = f'<SH c="{category}" s="" p="0" m="0"></SH>'
```

**–≠—Ç–æ –ù–ï –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ –ø–∞—Ä—Å–µ—Ä –Ω–µ —É–º–µ–µ—Ç –∏—Ö –ø–∞—Ä—Å–∏—Ç—å!**

---

## ‚úÖ –ü–∞—Ä—Å–µ—Ä —É–Ω–∏–≤–µ—Ä—Å–∞–ª–µ–Ω

```python
# –ü–∞—Ä—Å–µ—Ä –æ–¥–∏–Ω–∞–∫–æ–≤–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –í–°–ï –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:
def parse_response(xml_str, shop_code):
    root = ET.fromstring(xml_str)
    
    for item_el in root.findall("O"):
        item = parse_item(item_el)  # ‚Üê –ü–∞—Ä—Å–∏—Ç –õ–Æ–ë–´–ï –∞—Ç—Ä–∏–±—É—Ç—ã!
        items.append(item)
    
    return items
```

**–ù–µ–≤–∞–∂–Ω–æ —á—Ç–æ –≤ `<O ... />` - –ø–∞—Ä—Å–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç!**

---

## üöÄ –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω–æ–º –∑–∞–ø—É—Å–∫–µ

```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º –≤–æ—Ä–∫–µ—Ä
python shop_workers/moscow_worker.py
```

### –í—ã–≤–æ–¥ –±—É–¥–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–∏–º:

```
ü§ñ MOSCOW Worker: –∑–∞–ø—É—â–µ–Ω
üîê MOSCOW: –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è...
‚úì –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è Sova: —É—Å–ø–µ—à–Ω–æ

üì∏ MOSCOW: —Å–æ–∑–¥–∞–Ω–∏–µ —Å–Ω–∏–º–∫–∞...

üîÑ –ü–∞—Ä—Å–∏–Ω–≥ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ 'k' –≤ –º–∞–≥–∞–∑–∏–Ω–µ Moscow...
  üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ 0... ‚úì –ù–∞–π–¥–µ–Ω–æ 50 –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
  üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ 1... ‚úì –ü–æ–≤—Ç–æ—Ä
üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ 50 —Ç–æ–≤–∞—Ä–æ–≤ –≤ –ë–î...
‚úì –ö–∞—Ç–µ–≥–æ—Ä–∏—è 'k': 50 —Ç–æ–≤–∞—Ä–æ–≤, 0 –≥—Ä—É–ø–ø

üîÑ –ü–∞—Ä—Å–∏–Ω–≥ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ 'p' –≤ –º–∞–≥–∞–∑–∏–Ω–µ Moscow...
  üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ 0... ‚úì –ù–∞–π–¥–µ–Ω–æ 20 –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
  üì¶ –†–∞—Å–∫—Ä—ã—Ç–∏–µ 5 –≥—Ä—É–ø–ø...
    üîì –ì—Ä—É–ø–ø–∞: Glock 18 (count=13)
      ‚úì –ü–æ–ª—É—á–µ–Ω–æ 13 —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –≥—Ä—É–ø–ø—ã
    ... (–µ—â—ë 4 –≥—Ä—É–ø–ø—ã)
üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ 85 —Ç–æ–≤–∞—Ä–æ–≤ –≤ –ë–î...
‚úì –ö–∞—Ç–µ–≥–æ—Ä–∏—è 'p': 85 —Ç–æ–≤–∞—Ä–æ–≤, 5 –≥—Ä—É–ø–ø

... (25 –∫–∞—Ç–µ–≥–æ—Ä–∏–π)

üîÑ –ü–∞—Ä—Å–∏–Ω–≥ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ 's' –≤ –º–∞–≥–∞–∑–∏–Ω–µ Moscow...
  üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ 0... ‚úì –ù–∞–π–¥–µ–Ω–æ 50 –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤    ‚Üê –†–ï–°–£–†–°–´!
  üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ 1... ‚úì –ù–∞–π–¥–µ–Ω–æ 50 –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
  üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ 2... ‚úì –ù–∞–π–¥–µ–Ω–æ 50 –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
  üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ 3... ‚úì –ù–∞–π–¥–µ–Ω–æ 42 –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
  üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ 4... ‚úì –ü–æ–≤—Ç–æ—Ä
üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ 192 —Ç–æ–≤–∞—Ä–æ–≤ –≤ –ë–î...
‚úì –ö–∞—Ç–µ–≥–æ—Ä–∏—è 's': 192 —Ç–æ–≤–∞—Ä–æ–≤, 0 –≥—Ä—É–ø–ø           ‚Üê –ú–ù–û–ì–û!

üîÑ –ü–∞—Ä—Å–∏–Ω–≥ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ 'y' –≤ –º–∞–≥–∞–∑–∏–Ω–µ Moscow...
  üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ 0... ‚úì –ù–∞–π–¥–µ–Ω–æ 50 –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤    ‚Üê –ö–†–ê–§–¢!
  üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ 1... ‚úì –ù–∞–π–¥–µ–Ω–æ 50 –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
  üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ 2... ‚úì –ù–∞–π–¥–µ–Ω–æ 35 –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
  üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ 3... ‚úì –ü–æ–≤—Ç–æ—Ä
üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ 135 —Ç–æ–≤–∞—Ä–æ–≤ –≤ –ë–î...
‚úì –ö–∞—Ç–µ–≥–æ—Ä–∏—è 'y': 135 —Ç–æ–≤–∞—Ä–æ–≤, 0 –≥—Ä—É–ø–ø           ‚Üê –ú–ù–û–ì–û!

üîÑ –ü–∞—Ä—Å–∏–Ω–≥ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ 'u' –≤ –º–∞–≥–∞–∑–∏–Ω–µ Moscow...
  üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ 0... ‚úì –ù–∞–π–¥–µ–Ω–æ 50 –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤    ‚Üê –í–°–¢–†–û–ô–ö–ò!
  üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ 1... ‚úì –ù–∞–π–¥–µ–Ω–æ 28 –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
  üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ 2... ‚úì –ü–æ–≤—Ç–æ—Ä
üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ 78 —Ç–æ–≤–∞—Ä–æ–≤ –≤ –ë–î...
‚úì –ö–∞—Ç–µ–≥–æ—Ä–∏—è 'u': 78 —Ç–æ–≤–∞—Ä–æ–≤, 0 –≥—Ä—É–ø–ø            ‚Üê –ú–ù–û–ì–û!

... (–æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)

‚úì Moscow: —Å–Ω–∏–º–æ–∫ —Å–æ–∑–¥–∞–Ω (ID=1, items=1847)
                                    ^^^^
                                    –ü–û–ß–¢–ò 2000 –¢–û–í–ê–†–û–í!
```

---

## üí° –†–µ–∑—é–º–µ

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è (mock):
```
27 –∫–∞—Ç–µ–≥–æ—Ä–∏–π ‚Üí 9 —Å –¥–∞–Ω–Ω—ã–º–∏ ‚Üí 12 —Ç–æ–≤–∞—Ä–æ–≤
(—Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–∫–∞–∑–∞ –õ–û–ì–ò–ö–ò –ø–∞—Ä—Å–µ—Ä–∞)
```

### –†–µ–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫:
```
27 –∫–∞—Ç–µ–≥–æ—Ä–∏–π ‚Üí 27 —Å –∑–∞–ø—Ä–æ—Å–æ–º ‚Üí ~1700 —Ç–æ–≤–∞—Ä–æ–≤!
(—Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞)
```

---

## ‚úÖ –í–´–í–û–î

**–ü–∞—Ä—Å–µ—Ä –≥–æ—Ç–æ–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –†–ï–ê–õ–¨–ù–´–ï –º–∞–≥–∞–∑–∏–Ω—ã —Å —Ç—ã—Å—è—á–∞–º–∏ —Ç–æ–≤–∞—Ä–æ–≤!**

–í –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–∫–∞–∑–∞–ª —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏–∫—É, —á—Ç–æ–±—ã –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å 1700 —Å—Ç—Ä–æ–∫ mock –¥–∞–Ω–Ω—ã—Ö.

**–ü—Ä–∏ —Ä–µ–∞–ª—å–Ω–æ–º –∑–∞–ø—É—Å–∫–µ –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω—ã!**

---

**–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:**
```bash
bash tools/ctl.sh api5-up-db
docker exec -d host-api-service-api_5-1 python shop_workers/run_workers.py
```

**–ò —á–µ—Ä–µ–∑ 15 –º–∏–Ω—É—Ç —É–≤–∏–¥–∏—à—å –†–ï–ê–õ–¨–ù–´–ï —Å–æ—Ç–Ω–∏ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏!** üöÄ








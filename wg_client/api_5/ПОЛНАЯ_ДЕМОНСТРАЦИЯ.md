# üé¨ API 5 - –ü–æ–ª–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã

## üìä –ß–¢–û –î–ï–õ–ê–ï–¢ –ö–ê–ñ–î–ê–Ø –†–£–ß–ö–ê (10 endpoints)

---

## üè• –ì–†–£–ü–ü–ê 1: HEALTH & SERVICE (3 —Ä—É—á–∫–∏)

### –ó–∞—á–µ–º –Ω—É–∂–Ω—ã:
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞ –∏ –µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

### 1. `GET /healthz` ‚Äî –ñ–∏–≤ –ª–∏ —Å–µ—Ä–≤–∏—Å?

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ FastAPI –∑–∞–ø—É—â–µ–Ω –∏ –æ—Ç–≤–µ—á–∞–µ—Ç

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl http://localhost:8085/healthz
```

**–û—Ç–≤–µ—Ç:**
```json
{"status": "ok", "service": "API 5 - Shop Parser"}
```

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:**
- Docker healthcheck
- Kubernetes liveness probe
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus)
- –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞

---

### 2. `GET /shop/health` ‚Äî –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –º–æ–¥—É–ª—å –ø–∞—Ä—Å–µ—Ä–∞?

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ –ú–æ–¥—É–ª—å shop parser –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω

**–û—Ç–≤–µ—Ç:**
```json
{"status": "ok", "service": "Shop Parser Module"}
```

---

### 3. `GET /db/health` ‚Äî –î–æ—Å—Ç—É–ø–Ω–∞ –ª–∏ –ë–î?

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ PostgreSQL –¥–æ—Å—Ç—É–ø–Ω–∞
- ‚úÖ –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- ‚úÖ –ú–æ–∂–µ–º –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã

**–û—Ç–≤–µ—Ç (OK):**
```json
{"status": "ok", "database": "connected"}
```

**–û—Ç–≤–µ—Ç (ERROR):**
```json
{"detail": "Database error: could not connect"}
```

---

## üì¶ –ì–†–£–ü–ü–ê 2: ITEMS (3 —Ä—É—á–∫–∏)

### –ó–∞—á–µ–º –Ω—É–∂–Ω—ã:
–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ —Ç–æ–≤–∞—Ä–∞—Ö –∏–∑ –º–∞–≥–∞–∑–∏–Ω–æ–≤

---

### 4. `GET /items/list` ‚Äî –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- –ú–æ–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –º–∞–≥–∞–∑–∏–Ω—É
- –ú–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:**

```bash
# –í—Å–µ —Ç–æ–≤–∞—Ä—ã (–ø–µ—Ä–≤—ã–µ 10)
curl "http://localhost:8085/items/list?limit=10"

# –¢–æ–ª—å–∫–æ Moscow
curl "http://localhost:8085/items/list?shop_code=moscow&limit=5"

# –°—Ç—Ä–∞–Ω–∏—Ü–∞ 2, –ø–æ 50 —Ç–æ–≤–∞—Ä–æ–≤
curl "http://localhost:8085/items/list?page=2&limit=50"

# –¢–æ–ª—å–∫–æ Oasis, –º–∞–∫—Å–∏–º—É–º —Ç–æ–≤–∞—Ä–æ–≤
curl "http://localhost:8085/items/list?shop_code=oasis&limit=1000"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "items": [
    {
      "id": 79469641,
      "txt": "Butterfly knife",
      "price": 4.0,
      "current_quality": 125,
      "max_quality": 125,
      "shop_id": 1,
      "template_id": 42,
      "owner": null
    }
  ],
  "total": 1,
  "page": 1,
  "limit": 10
}
```

**–ü–æ–ª—è —Ç–æ–≤–∞—Ä–∞:**
- `id` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∏–∑ –∏–≥—Ä—ã
- `txt` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
- `price` ‚Äî —Ü–µ–Ω–∞ –≤ –∫—Ä–µ–¥–∏—Ç–∞—Ö
- `current_quality` ‚Äî —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- `max_quality` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- `shop_id` ‚Äî ID –º–∞–≥–∞–∑–∏–Ω–∞ (1=moscow, 2=oasis, 3=neva)
- `template_id` ‚Äî ID —à–∞–±–ª–æ–Ω–∞ (—Ç–∏–ø —Ç–æ–≤–∞—Ä–∞)
- `owner` ‚Äî –≤–ª–∞–¥–µ–ª–µ—Ü (null = infinty —Ç–æ–≤–∞—Ä)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–∞
- ‚úÖ –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ)
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ü–µ–Ω

---

### 5. `GET /items/{id}` ‚Äî –î–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–≤–∞—Ä–µ –ø–æ ID

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl http://localhost:8085/items/79469641
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": 79469641,
  "txt": "Butterfly knife",
  "price": 4.0,
  "current_quality": 125,
  "max_quality": 125,
  "shop_id": 1,
  "template_id": 42,
  "owner": null
}
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π (—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å ID, –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏)
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞

---

## üì∏ –ì–†–£–ü–ü–ê 3: SNAPSHOTS (2 —Ä—É—á–∫–∏)

### –ó–∞—á–µ–º –Ω—É–∂–Ω—ã:
–†–∞–±–æ—Ç–∞ —Å–æ —Å–Ω–∏–º–∫–∞–º–∏ –º–∞–≥–∞–∑–∏–Ω–æ–≤ (–∏—Å—Ç–æ—Ä–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π)

---

### 6. `GET /snapshots/list` ‚Äî –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–Ω–∏–º–∫–æ–≤

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ —Å–Ω–∏–º–∫–∏ (–∏–ª–∏ –ø–æ –º–∞–≥–∞–∑–∏–Ω—É)

**–ó–∞–ø—Ä–æ—Å 1: –í—Å–µ —Å–Ω–∏–º–∫–∏**
```bash
curl "http://localhost:8085/snapshots/list"
```

**–ó–∞–ø—Ä–æ—Å 2: –¢–æ–ª—å–∫–æ Moscow**
```bash
curl "http://localhost:8085/snapshots/list?shop_code=moscow"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "snapshots": [
    {
      "id": 24,
      "shop_id": 1,
      "created_at": "2025-10-11T23:30:00",
      "items_count": 1855,
      "worker_name": "moscow_worker"
    },
    {
      "id": 23,
      "shop_id": 1,
      "created_at": "2025-10-11T22:30:00",
      "items_count": 1847,
      "worker_name": "moscow_worker"
    },
    ... (–µ—â—ë 22 —Å–Ω–∏–º–∫–∞ –∑–∞ —Å—É—Ç–∫–∏)
  ],
  "total": 24
}
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- ‚úÖ –í—ã–±–æ—Ä —Å–Ω–∏–º–∫–æ–≤ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- ‚úÖ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–∏–Ω–∞–º–∏–∫–∏ —Ä—ã–Ω–∫–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤–æ—Ä–∫–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç

---

### 7. `GET /snapshots/latest` ‚Äî –ü–æ—Å–ª–µ–¥–Ω–∏–π —Å–Ω–∏–º–æ–∫

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–∞–º—ã–π —Å–≤–µ–∂–∏–π —Å–Ω–∏–º–æ–∫ –º–∞–≥–∞–∑–∏–Ω–∞

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl "http://localhost:8085/snapshots/latest?shop_code=moscow"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": 24,
  "shop_id": 1,
  "created_at": "2025-10-11T23:30:00",
  "items_count": 1855,
  "worker_name": "moscow_worker"
}
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- ‚úÖ **–°–∞–º–∞—è —á–∞—Å—Ç–∞—è —Ä—É—á–∫–∞!** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: –∫–æ–≥–¥–∞ –±—ã–ª –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–Ω–∏–º–æ–∫
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –≤–æ—Ä–∫–µ—Ä–æ–≤
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤

**–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- –ö–æ–≥–¥–∞ –º–∞–≥–∞–∑–∏–Ω –æ–±–Ω–æ–≤–ª—è–ª—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑
- –°–∫–æ–ª—å–∫–æ —Å–µ–π—á–∞—Å —Ç–æ–≤–∞—Ä–æ–≤
- –ö–∞–∫–æ–π –≤–æ—Ä–∫–µ—Ä —Ä–∞–±–æ—Ç–∞–ª

---

## üëë –ì–†–£–ü–ü–ê 4: ADMIN (2 —Ä—É—á–∫–∏)

### –ó–∞—á–µ–º –Ω—É–∂–Ω—ã:
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

---

### 8. `POST /admin/snapshot/trigger` ‚Äî –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–Ω–∏–º–æ–∫ –≤—Ä—É—á–Ω—É—é

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –º–∞–≥–∞–∑–∏–Ω–∞ (–±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è —á–∞—Å–∞)

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl -X POST "http://localhost:8085/admin/snapshot/trigger?shop_code=moscow"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "triggered",
  "shop_code": "moscow"
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Å–ª–µ –∑–∞–ø—Ä–æ—Å–∞:**

1. –í–æ—Ä–∫–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É
2. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –∏–≥—Ä–æ–≤–æ–º—É —Å–µ—Ä–≤–µ—Ä—É (–µ—Å–ª–∏ –Ω–µ –ø–æ–¥–∫–ª—é—á—ë–Ω)
3. –ü–∞—Ä—Å–∏—Ç –≤—Å–µ 27 –∫–∞—Ç–µ–≥–æ—Ä–∏–π
4. –†–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –≥—Ä—É–ø–ø—ã
5. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–≤–∞—Ä—ã –≤ –ë–î
6. –°–æ–∑–¥–∞—ë—Ç —Å–Ω–∏–º–æ–∫
7. **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 10-15 –º–∏–Ω—É—Ç**

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Å–µ—Ä–∞
- ‚úÖ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–≤–∞–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
- ‚úÖ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º
- ‚úÖ –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ (–Ω–µ –∂–¥–∞—Ç—å —á–∞—Å)

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ù–µ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª—è—Ç—å! –≠—Ç–æ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

---

### 9. `GET /admin/bots/status` ‚Äî –°—Ç–∞—Ç—É—Å –±–æ—Ç–æ–≤

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—Å–µ—Ö 3 –±–æ—Ç–æ–≤-–ø–∞—Ä—Å–µ—Ä–æ–≤

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl http://localhost:8085/admin/bots/status
```

**–û—Ç–≤–µ—Ç (–≤—Å–µ –û–ö):**
```json
{
  "bots": [
    {
      "shop_code": "moscow",
      "bot_login": "Sova",
      "authenticated": true,
      "session_id": "Sova...",
      "last_activity": "2025-10-11T15:45:30"
    },
    {
      "shop_code": "oasis",
      "bot_login": "Sova",
      "authenticated": true,
      "session_id": "Sova...",
      "last_activity": "2025-10-11T15:45:28"
    },
    {
      "shop_code": "neva",
      "bot_login": "Sova",
      "authenticated": true,
      "session_id": "Sova...",
      "last_activity": "2025-10-11T15:45:32"
    }
  ]
}
```

**–û—Ç–≤–µ—Ç (–ø—Ä–æ–±–ª–µ–º–∞):**
```json
{
  "bots": [
    ...,
    {
      "shop_code": "neva",
      "bot_login": "Sova",
      "authenticated": false,  ‚Üê ‚ùå –ù–ï –ê–í–¢–û–†–ò–ó–û–í–ê–ù!
      "session_id": null,
      "last_activity": null
    }
  ]
}
```

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- `authenticated` ‚Äî –∑–∞–ª–æ–≥–∏–Ω–µ–Ω –ª–∏ –±–æ—Ç
- `session_id` ‚Äî ID —Å–µ—Å—Å–∏–∏ –≤ –∏–≥—Ä–µ
- `last_activity` ‚Äî –∫–æ–≥–¥–∞ –±—ã–ª –ø–æ—Å–ª–µ–¥–Ω–∏–π keep-alive –ø–∏–Ω–≥

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ last_activity:**
- < 1 –º–∏–Ω—É—Ç—ã –Ω–∞–∑–∞–¥ ‚Üí ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ
- 1-2 –º–∏–Ω—É—Ç—ã –Ω–∞–∑–∞–¥ ‚Üí ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–±–ª–µ–º—ã
- > 2 –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥ ‚Üí ‚ùå –ë–æ—Ç –∑–∞–≤–∏—Å –∏–ª–∏ –æ—Ç–∫–ª—é—á—ë–Ω

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- ‚úÖ **–ö—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–Ω–æ!** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–∂–¥—ã–µ 30-60 —Å–µ–∫—É–Ω–¥
- ‚úÖ –ê–ª–µ—Ä—Ç—ã (–µ—Å–ª–∏ –±–æ—Ç –æ—Ç–∫–ª—é—á–∏–ª—Å—è)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
- ‚úÖ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π

---

## üéØ –ì–õ–ê–í–ù–´–ï –†–£–ß–ö–ò (TOP-3)

### ü•á 1. GET /admin/bots/status
**–°–∞–º–∞—è –≤–∞–∂–Ω–∞—è –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞!**

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∂–∏–≤—ã –ª–∏ –±–æ—Ç—ã. –ë–µ–∑ –±–æ—Ç–æ–≤ –Ω–µ—Ç —Å–Ω–∏–º–∫–æ–≤.

```bash
# –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
watch -n 30 'curl -s http://localhost:8085/admin/bots/status | jq'
```

---

### ü•à 2. GET /snapshots/latest
**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö**

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–≥–¥–∞ –±—ã–ª –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–Ω–∏–º–æ–∫ –∏ —Å–∫–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä–æ–≤.

```bash
# –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
watch -n 60 'curl -s http://localhost:8085/snapshots/latest?shop_code=moscow | jq'
```

---

### ü•â 3. GET /items/list
**–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ —Ç–æ–≤–∞—Ä–∞—Ö**

–û—Å–Ω–æ–≤–Ω–∞—è —Ä—É—á–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –º–∞–≥–∞–∑–∏–Ω–∞.

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–≤–∞—Ä—ã
curl "http://localhost:8085/items/list?shop_code=moscow&limit=10"
```

---

## üìä –ò–¢–û–ì–û–í–ê–Ø –¢–ê–ë–õ–ò–¶–ê

| –†—É—á–∫–∞ | –ß–∞—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|-------|----------------------|-------------|
| `/admin/bots/status` | **–ö–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥** | üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ |
| `/snapshots/latest` | **–ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É** | üü° –í–∞–∂–Ω–æ |
| `/items/list` | **–ü–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é** | üü¢ –†–∞–±–æ—á–∞—è |
| `/admin/snapshot/trigger` | **–†–µ–¥–∫–æ (—Ç–µ—Å—Ç—ã)** | üü° –í–∞–∂–Ω–æ |
| `/items/{id}` | **–ü–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é** | üü¢ –†–∞–±–æ—á–∞—è |
| `/snapshots/list` | **–†–∞–∑ –≤ —á–∞—Å** | üü¢ –†–∞–±–æ—á–∞—è |
| `/healthz` | **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** | üü° –í–∞–∂–Ω–æ |
| `/db/health` | **–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö** | üü¢ –†–∞–±–æ—á–∞—è |
| `/shop/health` | **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ** | ‚ö™ –î–æ–ø. |
| `/docs` | **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** | ‚ö™ –î–æ–ø. |

---

## ‚úÖ –ì–û–¢–û–í–û!

**10 endpoints —Ä–∞–±–æ—Ç–∞—é—Ç –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

–î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞:
```bash
cd /Users/ii/Documents/code/WG_HUB/wg_client
bash tools/ctl.sh api5-up-db
```

–ó–∞—Ç–µ–º —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ª—é–±–æ–π endpoint! üöÄ








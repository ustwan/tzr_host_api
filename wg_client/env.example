# ---- GLOBAL ----
PROJECT_NAME=wg-client
TZ=Europe/Moscow

# ---- DB SWITCH ----
DB_MODE=test            # test | prod

# ---- TEST DB (Docker) ----
DB_TEST_HOST=db
DB_TEST_PORT=3306
DB_TEST_NAME=tzserver
DB_TEST_USER=tzuser
DB_TEST_PASSWORD=tzpass
DB_TEST_ROOT_PASSWORD=supersecret_root

# ---- PROD DB (LAN) ----
DB_PROD_HOST=10.0.0.50
DB_PROD_PORT=3306
DB_PROD_NAME=tzserver
DB_PROD_USER=prod_user
DB_PROD_PASSWORD=change_me

# ---- REDIS (inside API_FATHER) ----
REDIS_URL=redis://api_father_redis:6379/0
QUEUE_REQUESTS=queue:requests
QUEUE_EVENTS=queue:events

# ---- TRAEFIK ----
TRAEFIK_LOG_LEVEL=INFO
TRAEFIK_DASHBOARD_USER=admin
TRAEFIK_DASHBOARD_PASS=admin123
TRAEFIK_BIND_IP=127.0.0.1   # на Mac/локально. На Linux можно 0.0.0.0 или адрес wg0 хоста

# ---- API PORTS (internal)
API1_PORT=8081
API2_PORT=8082
API3_PORT=8083
API4_PORT=8084

# ---- API_4 BATTLE LOGS ----
LOGS_BASE=/home/zero/logs/btl
BATCH_SIZE=100
MAX_WORKERS=4
RETRY_ATTEMPTS=3
RETRY_DELAY=1.0

# ---- API_4 POSTGRESQL DB ----
DB_API4_TEST_NAME=api4_battles
DB_API4_TEST_USER=api4_user
DB_API4_TEST_PASSWORD=api4_pass
DB_API4_PROD_HOST=localhost
DB_API4_PROD_PORT=5432
DB_API4_PROD_NAME=api4_battles
DB_API4_PROD_USER=api4_user
DB_API4_PROD_PASSWORD=api4_pass

# ---- ADMIN API TOKEN ----
ADMIN_API_TOKEN=change_me_admin_token

# ---- MIGRATIONS ----
MIGRATE_ON_START_TEST=1

# WireGuard-клиент на Variant B конфигурируется файлом wg_client/wg/wg0.conf (см. wg_client/wg/README_WG.md)

# ---- GAME SERVER SWITCH ----
# test: использовать локальный эмулятор game_server_mock:5190 (прямое подключение)
# prod: использовать реальный сервер через game_bridge:5191 (изолировано)
# НОВЫЕ ПОРТЫ (после миграции):
# 1010 - traefik (HTTP маршрутизация)
# 1120 - wg_vpn (WireGuard VPN)
# 5191 - game_bridge (TCP proxy для Game Server) ← НОВЫЙ!
# 6006 - db (MySQL)
# 6012 - api_4_db (PostgreSQL API_4)
# 6013 - metabase-db (PostgreSQL Metabase)
# 6029 - api_father_redis (Redis)
GAME_SERVER_MODE=test      # test | prod
# TEST: через mock_game_bridge (эмуляция production архитектуры)
GAME_SERVER_TEST_HOST=mock_game_bridge
GAME_SERVER_TEST_PORT=5191              # через game_bridge!
# PROD: через game_bridge на HOST_SERVER
GAME_SERVER_PROD_HOST=10.8.0.20        # HOST_SERVER IP
GAME_SERVER_PROD_PORT=5191              # game_bridge порт! (НЕ 5190)

# ---- FILE LOGS ENVIRONMENT ----
ENVIRONMENT=local              # local | production
LOGS_ROOT=xml/                 # local: xml/ | production: /srv/btl_mirror
LOGS_MIRROR=/srv/btl_mirror   # локальное зеркало логов
LOGS_STORE=/srv/btl_store/gz  # хранилище сжатых .gz файлов

# ---- FILE SYNC (HOST_SERVER) ----
RSYNC_HOST=btl_rsyncd         # HOST_SERVER: btl_rsyncd | local: mock_btl_rsyncd
RSYNC_PORT=873
SYNC_INTERVAL=60              # интервал синхронизации (сек)
COMPRESS_INTERVAL=30          # интервал сжатия (сек)
# ---- FILE SHARDING ----
SHARD_DIVISOR=50000

# API_HOST_MONITOR

ะฆะตะฝััะฐะปะธะทะพะฒะฐะฝะฝะฐั ัะธััะตะผะฐ ะผะพะฝะธัะพัะธะฝะณะฐ ะธ ัะฟัะฐะฒะปะตะฝะธั ะธะฝััะฐััััะบัััะพะน WG_HUB.

## ะะฑะทะพั

ะญัะพั ะผะพะดัะปั ัะพะดะตัะถะธั ะฒัะต ัะตัะฒะธัั ะดะปั ะผะพะฝะธัะพัะธะฝะณะฐ, ัะฟัะฐะฒะปะตะฝะธั ะธ ะฐะดะผะธะฝะธัััะธัะพะฒะฐะฝะธั ะพัะฝะพะฒะฝะพะน ะธะฝััะฐััััะบัััั ะฟัะพะตะบัะฐ.

## ะกะตัะฒะธัั

### ๐ณ ะฃะฟัะฐะฒะปะตะฝะธะต Docker
- **Portainer** (9100) - ัะตะฝััะฐะปะธะทะพะฒะฐะฝะฝะพะต ัะฟัะฐะฒะปะตะฝะธะต Docker ะบะพะฝัะตะนะฝะตัะฐะผะธ
- **Portainer Agent** (9001) - ะฐะณะตะฝั ะดะปั ัะดะฐะปะตะฝะฝะพะณะพ ัะฟัะฐะฒะปะตะฝะธั (HOST_SERVER)

### ๐ ะะพะฝะธัะพัะธะฝะณ
- **Netdata** (9101) - ะผะตััะธะบะธ ัะพััะฐ ะธ ะบะพะฝัะตะนะฝะตัะพะฒ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
- **Dozzle** (9102) - ะฟัะพัะผะพัั ะปะพะณะพะฒ ะฒัะตั ะบะพะฝัะตะนะฝะตัะพะฒ
- **Uptime Kuma** (9103) - ะผะพะฝะธัะพัะธะฝะณ ะดะพัััะฟะฝะพััะธ ัะตัะฒะธัะพะฒ

### ๐ ะฃะฟัะฐะฒะปะตะฝะธะต
- **Homarr** (9104) - ะตะดะธะฝะฐั ััะฐัั-ัััะฐะฝะธัะฐ ัะพ ะฒัะตะผะธ ัะตัะฒะธัะฐะผะธ
- **pgAdmin** (9105) - ะฒะตะฑ-ะธะฝัะตััะตะนั ะดะปั PostgreSQL
- **Metabase** (9106) - ะฐะฝะฐะปะธัะธะบะฐ ะธ ะดะฐัะฑะพัะดั
- **Swagger UI** (9107) - ัะตะฝััะฐะปะธะทะพะฒะฐะฝะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต ะฒัะตั API
- **File Browser** (9108) - ัะฐะนะปะพะฒัะน ะผะตะฝะตะดะถะตั
- **ttyd** (9109) - ะฒะตะฑ-ัะตัะผะธะฝะฐะป

### ๐ ะะฝะตัะฝะธะต ัะตัะฒะธัั
- **wg-easy** - ะฒะตะฑ-ะธะฝัะตััะตะนั ะดะปั WireGuard (ะทะฐะฟััะบะฐะตััั ะฒ compose WG_HOST)

### ๐๏ธ ะะฐะทะฐ ะดะฐะฝะฝัั
- **PostgreSQL** (5433) - ะพัะดะตะปัะฝะฐั ะะ ะดะปั Metabase (ะผะธะฝะธะผะฐะปัะฝะฐั ะบะพะฝัะธะณััะฐัะธั)

## ะัััััะน ััะฐัั

```bash
# ะะตัะตัะพะด ะฒ ะฟะฐะฟะบั
cd api_host_monitor

# ะะฐะฟััะบ ะฒัะตั ัะตัะฒะธัะพะฒ
docker-compose -f compose.monitoring.yml up -d

# ะัะพัะผะพัั ะปะพะณะพะฒ
docker-compose -f compose.monitoring.yml logs -f

# ะััะฐะฝะพะฒะบะฐ
docker-compose -f compose.monitoring.yml down
```

## ะะพััั

| ะกะตัะฒะธั | ะะพัั | ะะฟะธัะฐะฝะธะต |
|--------|------|----------|
| Portainer | 9100 | ะฃะฟัะฐะฒะปะตะฝะธะต Docker |
| Netdata | 9101 | ะะตััะธะบะธ |
| Dozzle | 9102 | ะะพะณะธ |
| Uptime Kuma | 9103 | ะะฟัะฐะนะผ |
| Homarr | 9104 | ะกัะฐัั-ัััะฐะฝะธัะฐ |
| pgAdmin | 9105 | PostgreSQL UI |
| Metabase | 9106 | ะะฝะฐะปะธัะธะบะฐ |
| Swagger UI | 9107 | ะขะตััะธัะพะฒะฐะฝะธะต API |
| File Browser | 9108 | ะคะฐะนะปั |
| ttyd | 9109 | ะขะตัะผะธะฝะฐะป |
| PostgreSQL | 5433 | ะะ ะดะปั Metabase |
| wg-easy | - | WireGuard UI (ะฒ compose WG_HOST) |

## ะะพัััะฟ

ะะพัะปะต ะทะฐะฟััะบะฐ ะฒัะต ัะตัะฒะธัั ะฑัะดัั ะดะพัััะฟะฝั ะฟะพ ะฐะดัะตัะฐะผ:
- `http://localhost:9100` - Portainer
- `http://localhost:9101` - Netdata
- `http://localhost:9102` - Dozzle
- `http://localhost:9103` - Uptime Kuma
- `http://localhost:9104` - Homarr
- `http://localhost:9105` - pgAdmin
- `http://localhost:9106` - Metabase
- `http://localhost:9107` - Swagger UI
- `http://localhost:9108` - File Browser
- `http://localhost:9109` - ttyd
- `http://localhost:8080` - wg-easy (ะธะท compose WG_HOST)

## ะฃัะตัะฝัะต ะดะฐะฝะฝัะต

### ะะพ ัะผะพะปัะฐะฝะธั
- **pgAdmin**: admin@wg-hub.local / wg_hub_admin
- **ttyd**: admin / wg_hub_password
- **Metabase**: ะฝะฐัััะฐะธะฒะฐะตััั ะฟัะธ ะฟะตัะฒะพะผ ะทะฐะฟััะบะต
- **wg-easy**: wg_hub_password (ะธะท compose WG_HOST)

### PostgreSQL (Metabase)
- **Host**: metabase-db
- **Port**: 5432
- **Database**: metabase
- **User**: metabase
- **Password**: metabase_password

## ะะพะฝัะธะณััะฐัะธั

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั
ะกะบะพะฟะธััะนัะต `env.example` ะฒ `.env` ะธ ะฝะฐัััะพะนัะต ะฟะพะด ัะฒะพะธ ะฝัะถะดั:

```bash
cp env.example .env
```

### ะกะตัะธ
- `monitoring` - ะฒะฝัััะตะฝะฝัั ัะตัั ะดะปั ัะตัะฒะธัะพะฒ ะผะพะฝะธัะพัะธะฝะณะฐ
- `dbnet` - ะฟะพะดะบะปััะตะฝะธะต ะบ ะพัะฝะพะฒะฝะพะน ะะ (ะดะปั pgAdmin)
- `HOST_API_SERVICE_default` - ะฟะพะดะบะปััะตะฝะธะต ะบ ะพัะฝะพะฒะฝะพะน ัะตัะธ ะดะปั ะดะพัััะฟะฐ ะบ API (ะดะปั Swagger UI)

## ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   HOST_API      โ    โ  HOST_SERVER    โ
โ                 โ    โ                 โ
โ โโโโโโโโโโโโโโโ โ    โ โโโโโโโโโโโโโโโ โ
โ โ Portainer   โ โโโโโโค โ Portainer   โ โ
โ โ (9100)      โ โ    โ โ Agent (9001)โ โ
โ โโโโโโโโโโโโโโโ โ    โ โโโโโโโโโโโโโโโ โ
โ                 โ    โ                 โ
โ โโโโโโโโโโโโโโโ โ    โโโโโโโโโโโโโโโโโโโ
โ โ Monitoring  โ โ
โ โ Services    โ โ
โ โโโโโโโโโโโโโโโ โ
โ                 โ
โ โโโโโโโโโโโโโโโ โ
โ โ Management  โ โ
โ โ Services    โ โ
โ โโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโ
```

## ะะพะฝะธัะพัะธะฝะณ

### Netdata
- ะะตะฐะปัะฝัะต ะผะตััะธะบะธ CPU, RAM, ะดะธัะบะฐ
- ะะตััะธะบะธ Docker ะบะพะฝัะตะนะฝะตัะพะฒ
- ะกะตัะตะฒะพะน ััะฐัะธะบ
- ะัะพัะตััั

### Uptime Kuma
- HTTP ะฟัะพะฒะตัะบะธ API
- Ping ะฟัะพะฒะตัะบะธ
- ะฃะฒะตะดะพะผะปะตะฝะธั ะพ ะฝะตะดะพัััะฟะฝะพััะธ
- ะััะพัะธั ะฐะฟัะฐะนะผะฐ

### Dozzle
- ะะพะณะธ ะฒัะตั ะบะพะฝัะตะนะฝะตัะพะฒ
- ะคะธะปัััะฐัะธั ะฟะพ ัะตัะฒะธัะฐะผ
- ะะพะธัะบ ะฟะพ ะปะพะณะฐะผ
- ะะฒัะพะพะฑะฝะพะฒะปะตะฝะธะต

## ะะตะทะพะฟะฐัะฝะพััั

- ะัะต ัะตัะฒะธัั ะธะทะพะปะธัะพะฒะฐะฝั ะฒ ะพัะดะตะปัะฝะพะน ัะตัะธ
- ะะฐะทะพะฒัะต ะฟะฐัะพะปะธ (ะธะทะผะตะฝะธัะต ะฒ ะฟัะพะดะฐะบัะตะฝะต!)
- ะะพัััะฟ ัะพะปัะบะพ ัะตัะตะท ะปะพะบะฐะปัะฝัั ัะตัั
- Portainer Agent ัะตัะตะท WireGuard ััะฝะฝะตะปั

## ะะฑัะปัะถะธะฒะฐะฝะธะต

### ะัะบะฐะฟ ะดะฐะฝะฝัั
```bash
# ะัะบะฐะฟ volumes
docker run --rm -v portainer_data:/data -v $(pwd):/backup alpine tar czf /backup/portainer_backup.tar.gz -C /data .
```

### ะะฑะฝะพะฒะปะตะฝะธะต
```bash
# ะะฑะฝะพะฒะปะตะฝะธะต ะฒัะตั ะพะฑัะฐะทะพะฒ
docker-compose -f compose.monitoring.yml pull
docker-compose -f compose.monitoring.yml up -d
```

### ะะพะณะธ
```bash
# ะัะต ัะตัะฒะธัั
docker-compose -f compose.monitoring.yml logs

# ะะพะฝะบัะตัะฝัะน ัะตัะฒะธั
docker-compose -f compose.monitoring.yml logs metabase
```

## Troubleshooting

### ะัะพะฑะปะตะผั ั ะฟะพััะฐะผะธ
ะฃะฑะตะดะธัะตัั, ััะพ ะฟะพััั 9100-9110 ะธ 5433 ัะฒะพะฑะพะดะฝั:
```bash
netstat -tulpn | grep -E ':(910[0-9]|5433)'
```

### ะัะพะฑะปะตะผั ั ัะตััั
ะัะพะฒะตัััะต ะฟะพะดะบะปััะตะฝะธะต ะบ ะพัะฝะพะฒะฝะพะน ะะ:
```bash
docker network ls | grep dbnet
```

### ะัะพะฑะปะตะผั ั Metabase
ะัะพะฒะตัััะต ะฟะพะดะบะปััะตะฝะธะต ะบ ะะ:
```bash
docker-compose -f compose.monitoring.yml logs metabase-db
```

# ‚ö° –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## üéØ –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±

### –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
cd /mnt/docker/tzr_host_api
sudo git pull origin main
cd wg_client
sudo bash auto_setup_server.sh
```

**–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
1. ‚úÖ –û–±–Ω–æ–≤–∏—Ç –∫–æ–¥ —Å GitHub
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç IP forwarding (–¥–ª—è VPN)
3. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç iptables (—Ä–∞–∑—Ä–µ—à–∏—Ç VPN ‚Üí API)
4. ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
5. ‚úÖ –ü–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç –≤—Å–µ –æ–±—Ä–∞–∑—ã
6. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
7. ‚úÖ –ü–æ–∫–∞–∂–µ—Ç —Å—Ç–∞—Ç—É—Å –∏ URL –∞–¥–º–∏–Ω–æ–∫

**–í—Ä–µ–º—è: ~5-10 –º–∏–Ω—É—Ç**

---

## üìã –ò–ª–∏ –ø–æ —à–∞–≥–∞–º (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª—å):

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥

```bash
cd /mnt/docker/tzr_host_api
sudo git pull origin main
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∏—Å—Ç–µ–º—É (–æ–¥–∏–Ω —Ä–∞–∑)

```bash
# IP forwarding –¥–ª—è VPN
sudo sysctl -w net.ipv4.ip_forward=1
echo "net.ipv4.ip_forward=1" | sudo tee -a /etc/sysctl.conf

# iptables –¥–ª—è VPN ‚Üí API
sudo iptables -A INPUT -i wg0 -j ACCEPT
sudo iptables -A FORWARD -i wg0 -j ACCEPT
sudo iptables -A FORWARD -o wg0 -j ACCEPT

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
sudo apt install iptables-persistent -y
sudo netfilter-persistent save
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—ë

```bash
cd wg_client
sudo bash tools/ctl.sh update
```

---

## üéõÔ∏è –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å:

```bash
sudo bash tools/ctl.sh status
```

### –ê–¥–º–∏–Ω–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã:

**–ò–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ (172.16.16.x):**
```
http://172.16.16.117:2019  - WG-Easy (VPN –∞–¥–º–∏–Ω–∫–∞)
http://172.16.16.117:9100  - Portainer (Docker)
http://172.16.16.117:9102  - Dozzle (–õ–æ–≥–∏)
```

**–ò–∑ VPN (–ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è):**
```
http://10.8.0.1:9107  - Swagger (API)
http://10.8.0.1:9100  - Portainer
http://10.8.0.1:8082  - API_2
```

---

## üö® –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ —É–ø–∞–≤—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞:

```bash
sudo bash tools/ctl.sh logs api_4
sudo bash tools/ctl.sh logs api_father
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å:

```bash
sudo bash tools/ctl.sh restart api_4
```

### –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞:

```bash
sudo bash tools/ctl.sh fresh-start
```

---

## üìû –ë—ã—Å—Ç—Ä–∞—è –ø–æ–º–æ—â—å

### –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–µ—Å–ª–∏ —è —á—Ç–æ-—Ç–æ –∏—Å–ø—Ä–∞–≤–∏–ª):

```bash
cd /mnt/docker/tzr_host_api
sudo git pull origin main
cd wg_client
sudo bash tools/ctl.sh update
```

**–û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ - –≤—Å—ë –æ–±–Ω–æ–≤–∏—Ç—Å—è!**

---

**–ì–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:** `wg_client/auto_setup_server.sh`  
**–ó–∞–ø—É—Å–∫:** `sudo bash auto_setup_server.sh`

